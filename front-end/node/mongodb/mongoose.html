<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>开始 | Web Docs</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="一份以手册为主的 Web 开发文档">
    
    <link rel="preload" href="/assets/css/0.styles.b2b5e418.css" as="style"><link rel="preload" href="/assets/js/app.a0f576ea.js" as="script"><link rel="preload" href="/assets/js/2.8a7b7341.js" as="script"><link rel="preload" href="/assets/js/367.e7f7ec5b.js" as="script"><link rel="preload" href="/assets/js/17.95405c80.js" as="script"><link rel="prefetch" href="/assets/js/10.8691d13a.js"><link rel="prefetch" href="/assets/js/100.28a4d843.js"><link rel="prefetch" href="/assets/js/101.1987a653.js"><link rel="prefetch" href="/assets/js/102.3c40a783.js"><link rel="prefetch" href="/assets/js/103.aeb1ac63.js"><link rel="prefetch" href="/assets/js/104.95ff8caa.js"><link rel="prefetch" href="/assets/js/105.4d769fd5.js"><link rel="prefetch" href="/assets/js/106.948d31cf.js"><link rel="prefetch" href="/assets/js/107.3eedf9fa.js"><link rel="prefetch" href="/assets/js/108.31ea3f26.js"><link rel="prefetch" href="/assets/js/109.94dc3ed4.js"><link rel="prefetch" href="/assets/js/11.24a58a76.js"><link rel="prefetch" href="/assets/js/110.ef4f2f03.js"><link rel="prefetch" href="/assets/js/111.381c76e0.js"><link rel="prefetch" href="/assets/js/112.cb46ecc7.js"><link rel="prefetch" href="/assets/js/113.77b13509.js"><link rel="prefetch" href="/assets/js/114.550111ed.js"><link rel="prefetch" href="/assets/js/115.3c7badd8.js"><link rel="prefetch" href="/assets/js/116.cb183e9f.js"><link rel="prefetch" href="/assets/js/117.e2b540d3.js"><link rel="prefetch" href="/assets/js/118.757d9e18.js"><link rel="prefetch" href="/assets/js/119.98a2e4b4.js"><link rel="prefetch" href="/assets/js/12.6b3d6124.js"><link rel="prefetch" href="/assets/js/120.0fc855b3.js"><link rel="prefetch" href="/assets/js/121.0eff55cf.js"><link rel="prefetch" href="/assets/js/122.49658f58.js"><link rel="prefetch" href="/assets/js/123.2a143813.js"><link rel="prefetch" href="/assets/js/124.6a8941d5.js"><link rel="prefetch" href="/assets/js/125.859cc0c2.js"><link rel="prefetch" href="/assets/js/126.f537e3e9.js"><link rel="prefetch" href="/assets/js/127.5e6290c2.js"><link rel="prefetch" href="/assets/js/128.95c74c0c.js"><link rel="prefetch" href="/assets/js/129.423c42e0.js"><link rel="prefetch" href="/assets/js/13.550daa4c.js"><link rel="prefetch" href="/assets/js/130.ad6b9236.js"><link rel="prefetch" href="/assets/js/131.22dab9f5.js"><link rel="prefetch" href="/assets/js/132.17cc94e5.js"><link rel="prefetch" href="/assets/js/133.79d2c601.js"><link rel="prefetch" href="/assets/js/134.e6eb9636.js"><link rel="prefetch" href="/assets/js/135.a151b97c.js"><link rel="prefetch" href="/assets/js/136.5a9c1615.js"><link rel="prefetch" href="/assets/js/137.e9d2a537.js"><link rel="prefetch" href="/assets/js/138.10987db9.js"><link rel="prefetch" href="/assets/js/139.8f424792.js"><link rel="prefetch" href="/assets/js/14.9ff72da4.js"><link rel="prefetch" href="/assets/js/140.7d3658db.js"><link rel="prefetch" href="/assets/js/141.244e46e9.js"><link rel="prefetch" href="/assets/js/142.b3f6ee1c.js"><link rel="prefetch" href="/assets/js/143.e899ae4d.js"><link rel="prefetch" href="/assets/js/144.960dc2b0.js"><link rel="prefetch" href="/assets/js/145.c8990aaa.js"><link rel="prefetch" href="/assets/js/146.407d4ccc.js"><link rel="prefetch" href="/assets/js/147.22b6cf44.js"><link rel="prefetch" href="/assets/js/148.8bddcb64.js"><link rel="prefetch" href="/assets/js/149.ab525691.js"><link rel="prefetch" href="/assets/js/15.41b0fd29.js"><link rel="prefetch" href="/assets/js/150.a0fb390f.js"><link rel="prefetch" href="/assets/js/151.7f6cba86.js"><link rel="prefetch" href="/assets/js/152.b2a6a517.js"><link rel="prefetch" href="/assets/js/153.20d24a16.js"><link rel="prefetch" href="/assets/js/154.17690677.js"><link rel="prefetch" href="/assets/js/155.f0e4cb8e.js"><link rel="prefetch" href="/assets/js/156.c56c1a8b.js"><link rel="prefetch" href="/assets/js/157.e0e0a36b.js"><link rel="prefetch" href="/assets/js/158.e9b171de.js"><link rel="prefetch" href="/assets/js/159.c2c88af6.js"><link rel="prefetch" href="/assets/js/16.0685634a.js"><link rel="prefetch" href="/assets/js/160.e6f0c30e.js"><link rel="prefetch" href="/assets/js/161.4924352c.js"><link rel="prefetch" href="/assets/js/162.06704503.js"><link rel="prefetch" href="/assets/js/163.4707d4a5.js"><link rel="prefetch" href="/assets/js/164.f8e0be5a.js"><link rel="prefetch" href="/assets/js/165.a829a231.js"><link rel="prefetch" href="/assets/js/166.d0015653.js"><link rel="prefetch" href="/assets/js/167.e52e8db6.js"><link rel="prefetch" href="/assets/js/168.2cd4ff61.js"><link rel="prefetch" href="/assets/js/169.39656098.js"><link rel="prefetch" href="/assets/js/170.b7aafec6.js"><link rel="prefetch" href="/assets/js/171.46531e48.js"><link rel="prefetch" href="/assets/js/172.33a12c12.js"><link rel="prefetch" href="/assets/js/173.5cba96ee.js"><link rel="prefetch" href="/assets/js/174.68c3e08a.js"><link rel="prefetch" href="/assets/js/175.3f29ae65.js"><link rel="prefetch" href="/assets/js/176.bdca172e.js"><link rel="prefetch" href="/assets/js/177.7b2a7d98.js"><link rel="prefetch" href="/assets/js/178.19498d3f.js"><link rel="prefetch" href="/assets/js/179.d708b13b.js"><link rel="prefetch" href="/assets/js/18.de8cf438.js"><link rel="prefetch" href="/assets/js/180.1fb9faeb.js"><link rel="prefetch" href="/assets/js/181.41132774.js"><link rel="prefetch" href="/assets/js/182.b75cd986.js"><link rel="prefetch" href="/assets/js/183.a96659c6.js"><link rel="prefetch" href="/assets/js/184.81639f3e.js"><link rel="prefetch" href="/assets/js/185.69e17eee.js"><link rel="prefetch" href="/assets/js/186.56e2eb73.js"><link rel="prefetch" href="/assets/js/187.fdd37042.js"><link rel="prefetch" href="/assets/js/188.a26232c6.js"><link rel="prefetch" href="/assets/js/189.b4e5a97b.js"><link rel="prefetch" href="/assets/js/19.2a37571c.js"><link rel="prefetch" href="/assets/js/190.98e633e0.js"><link rel="prefetch" href="/assets/js/191.264501ed.js"><link rel="prefetch" href="/assets/js/192.15c16064.js"><link rel="prefetch" href="/assets/js/193.db924a5f.js"><link rel="prefetch" href="/assets/js/194.010dbbe1.js"><link rel="prefetch" href="/assets/js/195.66587504.js"><link rel="prefetch" href="/assets/js/196.9f5cd003.js"><link rel="prefetch" href="/assets/js/197.4868f23e.js"><link rel="prefetch" href="/assets/js/198.02c98145.js"><link rel="prefetch" href="/assets/js/199.c26cb16c.js"><link rel="prefetch" href="/assets/js/20.e77274ef.js"><link rel="prefetch" href="/assets/js/200.151fd697.js"><link rel="prefetch" href="/assets/js/201.da5ce221.js"><link rel="prefetch" href="/assets/js/202.f6374eff.js"><link rel="prefetch" href="/assets/js/203.ddee0d21.js"><link rel="prefetch" href="/assets/js/204.d53d35b4.js"><link rel="prefetch" href="/assets/js/205.662ddf19.js"><link rel="prefetch" href="/assets/js/206.3f42965f.js"><link rel="prefetch" href="/assets/js/207.b71445cf.js"><link rel="prefetch" href="/assets/js/208.66abdbf0.js"><link rel="prefetch" href="/assets/js/209.2101491e.js"><link rel="prefetch" href="/assets/js/21.bf7a9875.js"><link rel="prefetch" href="/assets/js/210.ff17b31b.js"><link rel="prefetch" href="/assets/js/211.bf0b3988.js"><link rel="prefetch" href="/assets/js/212.620f2415.js"><link rel="prefetch" href="/assets/js/213.2dbb81f5.js"><link rel="prefetch" href="/assets/js/214.c35749f1.js"><link rel="prefetch" href="/assets/js/215.dcd2d3e2.js"><link rel="prefetch" href="/assets/js/216.1fc5584b.js"><link rel="prefetch" href="/assets/js/217.6f50162f.js"><link rel="prefetch" href="/assets/js/218.f66436a3.js"><link rel="prefetch" href="/assets/js/219.0b7620fa.js"><link rel="prefetch" href="/assets/js/22.1cc3e1e9.js"><link rel="prefetch" href="/assets/js/220.3c704bfb.js"><link rel="prefetch" href="/assets/js/221.72d3d98e.js"><link rel="prefetch" href="/assets/js/222.4302154c.js"><link rel="prefetch" href="/assets/js/223.3e3e982c.js"><link rel="prefetch" href="/assets/js/224.d52d9812.js"><link rel="prefetch" href="/assets/js/225.6a262d9c.js"><link rel="prefetch" href="/assets/js/226.0bef7d15.js"><link rel="prefetch" href="/assets/js/227.885cd890.js"><link rel="prefetch" href="/assets/js/228.8a23c099.js"><link rel="prefetch" href="/assets/js/229.876e1ec3.js"><link rel="prefetch" href="/assets/js/23.0cd1d788.js"><link rel="prefetch" href="/assets/js/230.61461e8a.js"><link rel="prefetch" href="/assets/js/231.70259c5c.js"><link rel="prefetch" href="/assets/js/232.e9ed9cf2.js"><link rel="prefetch" href="/assets/js/233.ec872f45.js"><link rel="prefetch" href="/assets/js/234.8ddb6b6d.js"><link rel="prefetch" href="/assets/js/235.0a494c2f.js"><link rel="prefetch" href="/assets/js/236.ff4a940e.js"><link rel="prefetch" href="/assets/js/237.590c3464.js"><link rel="prefetch" href="/assets/js/238.cfbc0df8.js"><link rel="prefetch" href="/assets/js/239.52cf7f56.js"><link rel="prefetch" href="/assets/js/24.bd36bb07.js"><link rel="prefetch" href="/assets/js/240.afe004e0.js"><link rel="prefetch" href="/assets/js/241.a1ad8045.js"><link rel="prefetch" href="/assets/js/242.15355e3f.js"><link rel="prefetch" href="/assets/js/243.bd20d6ae.js"><link rel="prefetch" href="/assets/js/244.68a8ba5e.js"><link rel="prefetch" href="/assets/js/245.11c5b7db.js"><link rel="prefetch" href="/assets/js/246.19d6b0fd.js"><link rel="prefetch" href="/assets/js/247.398921f8.js"><link rel="prefetch" href="/assets/js/248.9339fdfe.js"><link rel="prefetch" href="/assets/js/249.caeab032.js"><link rel="prefetch" href="/assets/js/25.c1ee30d3.js"><link rel="prefetch" href="/assets/js/250.37442400.js"><link rel="prefetch" href="/assets/js/251.ca8c998b.js"><link rel="prefetch" href="/assets/js/252.aa34ca41.js"><link rel="prefetch" href="/assets/js/253.b602e827.js"><link rel="prefetch" href="/assets/js/254.96e3f648.js"><link rel="prefetch" href="/assets/js/255.e695d673.js"><link rel="prefetch" href="/assets/js/256.52a75c7f.js"><link rel="prefetch" href="/assets/js/257.07126ae9.js"><link rel="prefetch" href="/assets/js/258.62899067.js"><link rel="prefetch" href="/assets/js/259.c6d98f9a.js"><link rel="prefetch" href="/assets/js/26.f1f05683.js"><link rel="prefetch" href="/assets/js/260.3c1c7c71.js"><link rel="prefetch" href="/assets/js/261.4b49f995.js"><link rel="prefetch" href="/assets/js/262.b7be2d1b.js"><link rel="prefetch" href="/assets/js/263.ee64df4e.js"><link rel="prefetch" href="/assets/js/264.0d232e80.js"><link rel="prefetch" href="/assets/js/265.5c2de63f.js"><link rel="prefetch" href="/assets/js/266.41ba3223.js"><link rel="prefetch" href="/assets/js/267.645e86ca.js"><link rel="prefetch" href="/assets/js/268.ae61d96d.js"><link rel="prefetch" href="/assets/js/269.54eaad33.js"><link rel="prefetch" href="/assets/js/27.58dd02d0.js"><link rel="prefetch" href="/assets/js/270.101ca96d.js"><link rel="prefetch" href="/assets/js/271.87dea596.js"><link rel="prefetch" href="/assets/js/272.a14bcb00.js"><link rel="prefetch" href="/assets/js/273.1365c36a.js"><link rel="prefetch" href="/assets/js/274.cd3a8605.js"><link rel="prefetch" href="/assets/js/275.e73443b2.js"><link rel="prefetch" href="/assets/js/276.7aa7f554.js"><link rel="prefetch" href="/assets/js/277.dabb3dc9.js"><link rel="prefetch" href="/assets/js/278.ca27fbc9.js"><link rel="prefetch" href="/assets/js/279.4f77e3c2.js"><link rel="prefetch" href="/assets/js/28.9c1b7e13.js"><link rel="prefetch" href="/assets/js/280.bfe43594.js"><link rel="prefetch" href="/assets/js/281.15948a71.js"><link rel="prefetch" href="/assets/js/282.a6923681.js"><link rel="prefetch" href="/assets/js/283.c4a886fb.js"><link rel="prefetch" href="/assets/js/284.a87176e1.js"><link rel="prefetch" href="/assets/js/285.b6fe4f81.js"><link rel="prefetch" href="/assets/js/286.c8bd480e.js"><link rel="prefetch" href="/assets/js/287.8be06b51.js"><link rel="prefetch" href="/assets/js/288.a73f764d.js"><link rel="prefetch" href="/assets/js/289.d0fa6398.js"><link rel="prefetch" href="/assets/js/29.37256cff.js"><link rel="prefetch" href="/assets/js/290.83b35938.js"><link rel="prefetch" href="/assets/js/291.0b387ccb.js"><link rel="prefetch" href="/assets/js/292.5d16a9fd.js"><link rel="prefetch" href="/assets/js/293.152a1bef.js"><link rel="prefetch" href="/assets/js/294.a5b74c4f.js"><link rel="prefetch" href="/assets/js/295.aec4c981.js"><link rel="prefetch" href="/assets/js/296.9e8eb3b2.js"><link rel="prefetch" href="/assets/js/297.33d18d60.js"><link rel="prefetch" href="/assets/js/298.30f7170a.js"><link rel="prefetch" href="/assets/js/299.8d48a6d1.js"><link rel="prefetch" href="/assets/js/3.ef27cbac.js"><link rel="prefetch" href="/assets/js/30.38cca7e8.js"><link rel="prefetch" href="/assets/js/300.f58fe408.js"><link rel="prefetch" href="/assets/js/301.06cc2e0d.js"><link rel="prefetch" href="/assets/js/302.2ac576df.js"><link rel="prefetch" href="/assets/js/303.001f957a.js"><link rel="prefetch" href="/assets/js/304.0fce19d2.js"><link rel="prefetch" href="/assets/js/305.2164b482.js"><link rel="prefetch" href="/assets/js/306.b6b1ed1f.js"><link rel="prefetch" href="/assets/js/307.f0f145c7.js"><link rel="prefetch" href="/assets/js/308.e22f6b5a.js"><link rel="prefetch" href="/assets/js/309.6cb832b2.js"><link rel="prefetch" href="/assets/js/31.4d1043fa.js"><link rel="prefetch" href="/assets/js/310.953282c7.js"><link rel="prefetch" href="/assets/js/311.3f3fbe40.js"><link rel="prefetch" href="/assets/js/312.d2bbc95b.js"><link rel="prefetch" href="/assets/js/313.30efc16f.js"><link rel="prefetch" href="/assets/js/314.f5e01d63.js"><link rel="prefetch" href="/assets/js/315.62c5f03d.js"><link rel="prefetch" href="/assets/js/316.90fa9ed9.js"><link rel="prefetch" href="/assets/js/317.b0f67018.js"><link rel="prefetch" href="/assets/js/318.14ff8b52.js"><link rel="prefetch" href="/assets/js/319.b9930f81.js"><link rel="prefetch" href="/assets/js/32.0e6c0370.js"><link rel="prefetch" href="/assets/js/320.ef6d3ec4.js"><link rel="prefetch" href="/assets/js/321.e5acb585.js"><link rel="prefetch" href="/assets/js/322.21a46169.js"><link rel="prefetch" href="/assets/js/323.e516c3c1.js"><link rel="prefetch" href="/assets/js/324.fc384d55.js"><link rel="prefetch" href="/assets/js/325.fddd4d1f.js"><link rel="prefetch" href="/assets/js/326.1216d7e6.js"><link rel="prefetch" href="/assets/js/327.5a509ea2.js"><link rel="prefetch" href="/assets/js/328.96e654ce.js"><link rel="prefetch" href="/assets/js/329.6490bb93.js"><link rel="prefetch" href="/assets/js/33.0b8f77e2.js"><link rel="prefetch" href="/assets/js/330.a5544969.js"><link rel="prefetch" href="/assets/js/331.1256acf2.js"><link rel="prefetch" href="/assets/js/332.77552d0d.js"><link rel="prefetch" href="/assets/js/333.b6118fe6.js"><link rel="prefetch" href="/assets/js/334.05c640d3.js"><link rel="prefetch" href="/assets/js/335.04fe4ec2.js"><link rel="prefetch" href="/assets/js/336.26be0b24.js"><link rel="prefetch" href="/assets/js/337.a0d3d335.js"><link rel="prefetch" href="/assets/js/338.a4fe11ee.js"><link rel="prefetch" href="/assets/js/339.d47120cc.js"><link rel="prefetch" href="/assets/js/34.2f5e6742.js"><link rel="prefetch" href="/assets/js/340.7a58ee44.js"><link rel="prefetch" href="/assets/js/341.e61bd730.js"><link rel="prefetch" href="/assets/js/342.9d4bf67a.js"><link rel="prefetch" href="/assets/js/343.501962dc.js"><link rel="prefetch" href="/assets/js/344.ce3275c8.js"><link rel="prefetch" href="/assets/js/345.628fe9bc.js"><link rel="prefetch" href="/assets/js/346.0e49381a.js"><link rel="prefetch" href="/assets/js/347.dabb1dad.js"><link rel="prefetch" href="/assets/js/348.29817914.js"><link rel="prefetch" href="/assets/js/349.6e298ba8.js"><link rel="prefetch" href="/assets/js/35.20e83899.js"><link rel="prefetch" href="/assets/js/350.91f21476.js"><link rel="prefetch" href="/assets/js/351.5b581bd3.js"><link rel="prefetch" href="/assets/js/352.45a6a379.js"><link rel="prefetch" href="/assets/js/353.6d639f09.js"><link rel="prefetch" href="/assets/js/354.5a17e2f0.js"><link rel="prefetch" href="/assets/js/355.719bfa5a.js"><link rel="prefetch" href="/assets/js/356.33e6d239.js"><link rel="prefetch" href="/assets/js/357.209a59e5.js"><link rel="prefetch" href="/assets/js/358.32ef7d43.js"><link rel="prefetch" href="/assets/js/359.b318203e.js"><link rel="prefetch" href="/assets/js/36.772901c4.js"><link rel="prefetch" href="/assets/js/360.a1aa990b.js"><link rel="prefetch" href="/assets/js/361.30f9ac52.js"><link rel="prefetch" href="/assets/js/362.ab4a7269.js"><link rel="prefetch" href="/assets/js/363.573581ce.js"><link rel="prefetch" href="/assets/js/364.ea4b3381.js"><link rel="prefetch" href="/assets/js/365.74cce6af.js"><link rel="prefetch" href="/assets/js/366.920816b1.js"><link rel="prefetch" href="/assets/js/368.fd3e4f57.js"><link rel="prefetch" href="/assets/js/369.8658b369.js"><link rel="prefetch" href="/assets/js/37.ae1a2a4a.js"><link rel="prefetch" href="/assets/js/370.5d9237ce.js"><link rel="prefetch" href="/assets/js/371.475db0bd.js"><link rel="prefetch" href="/assets/js/372.a63267bb.js"><link rel="prefetch" href="/assets/js/373.300c140d.js"><link rel="prefetch" href="/assets/js/374.3991ef47.js"><link rel="prefetch" href="/assets/js/375.3a151889.js"><link rel="prefetch" href="/assets/js/376.155192c5.js"><link rel="prefetch" href="/assets/js/377.2cb4647b.js"><link rel="prefetch" href="/assets/js/378.413266f8.js"><link rel="prefetch" href="/assets/js/379.b9d8217c.js"><link rel="prefetch" href="/assets/js/38.f72f42bd.js"><link rel="prefetch" href="/assets/js/380.38c60295.js"><link rel="prefetch" href="/assets/js/381.6f6ca9a3.js"><link rel="prefetch" href="/assets/js/382.09f8537e.js"><link rel="prefetch" href="/assets/js/383.cf560d98.js"><link rel="prefetch" href="/assets/js/384.ee7a21e3.js"><link rel="prefetch" href="/assets/js/385.9dc79de9.js"><link rel="prefetch" href="/assets/js/386.907326f4.js"><link rel="prefetch" href="/assets/js/387.d1e350d8.js"><link rel="prefetch" href="/assets/js/388.81d91e3a.js"><link rel="prefetch" href="/assets/js/389.6eb5097c.js"><link rel="prefetch" href="/assets/js/39.6ec3b0ba.js"><link rel="prefetch" href="/assets/js/390.59503d27.js"><link rel="prefetch" href="/assets/js/391.c3d27d8f.js"><link rel="prefetch" href="/assets/js/392.ad4becb1.js"><link rel="prefetch" href="/assets/js/393.fdc72691.js"><link rel="prefetch" href="/assets/js/394.0f637dbc.js"><link rel="prefetch" href="/assets/js/395.05a6897d.js"><link rel="prefetch" href="/assets/js/396.8e5e0990.js"><link rel="prefetch" href="/assets/js/397.4110b833.js"><link rel="prefetch" href="/assets/js/398.28fb56aa.js"><link rel="prefetch" href="/assets/js/399.893fcf6d.js"><link rel="prefetch" href="/assets/js/4.ed7772fd.js"><link rel="prefetch" href="/assets/js/40.64c56a23.js"><link rel="prefetch" href="/assets/js/400.c88c4b4e.js"><link rel="prefetch" href="/assets/js/401.2a3fd250.js"><link rel="prefetch" href="/assets/js/402.e0e5ccb5.js"><link rel="prefetch" href="/assets/js/403.8b8e1c4e.js"><link rel="prefetch" href="/assets/js/404.58276bee.js"><link rel="prefetch" href="/assets/js/405.982510c9.js"><link rel="prefetch" href="/assets/js/406.bc50b634.js"><link rel="prefetch" href="/assets/js/407.781c59e6.js"><link rel="prefetch" href="/assets/js/408.30eed933.js"><link rel="prefetch" href="/assets/js/409.bc9777c1.js"><link rel="prefetch" href="/assets/js/41.0e462988.js"><link rel="prefetch" href="/assets/js/410.07463ff2.js"><link rel="prefetch" href="/assets/js/411.04167034.js"><link rel="prefetch" href="/assets/js/412.a013ec19.js"><link rel="prefetch" href="/assets/js/413.bb6efe54.js"><link rel="prefetch" href="/assets/js/414.e330d0f2.js"><link rel="prefetch" href="/assets/js/415.a1f936b2.js"><link rel="prefetch" href="/assets/js/416.128ae43e.js"><link rel="prefetch" href="/assets/js/417.21e8daf7.js"><link rel="prefetch" href="/assets/js/418.aa709e52.js"><link rel="prefetch" href="/assets/js/419.b0f307de.js"><link rel="prefetch" href="/assets/js/42.ec6c4fb9.js"><link rel="prefetch" href="/assets/js/420.89a47904.js"><link rel="prefetch" href="/assets/js/421.74b93419.js"><link rel="prefetch" href="/assets/js/422.c72cd71d.js"><link rel="prefetch" href="/assets/js/423.7390a522.js"><link rel="prefetch" href="/assets/js/424.a22da308.js"><link rel="prefetch" href="/assets/js/425.1546bf88.js"><link rel="prefetch" href="/assets/js/426.22b6351a.js"><link rel="prefetch" href="/assets/js/427.fc6ed465.js"><link rel="prefetch" href="/assets/js/428.4d4e5449.js"><link rel="prefetch" href="/assets/js/429.a46d4bf7.js"><link rel="prefetch" href="/assets/js/43.c916fbdc.js"><link rel="prefetch" href="/assets/js/430.8673a4a0.js"><link rel="prefetch" href="/assets/js/431.bb88c9ed.js"><link rel="prefetch" href="/assets/js/432.302085d7.js"><link rel="prefetch" href="/assets/js/433.a709fb96.js"><link rel="prefetch" href="/assets/js/434.0bf597e1.js"><link rel="prefetch" href="/assets/js/435.dfe2f4fb.js"><link rel="prefetch" href="/assets/js/436.16df716f.js"><link rel="prefetch" href="/assets/js/437.c2f0262d.js"><link rel="prefetch" href="/assets/js/438.cb71e7f2.js"><link rel="prefetch" href="/assets/js/439.5b67dd64.js"><link rel="prefetch" href="/assets/js/44.793c12ca.js"><link rel="prefetch" href="/assets/js/440.6850d762.js"><link rel="prefetch" href="/assets/js/441.08d976da.js"><link rel="prefetch" href="/assets/js/442.ca6dcf58.js"><link rel="prefetch" href="/assets/js/443.383aa102.js"><link rel="prefetch" href="/assets/js/444.2d621540.js"><link rel="prefetch" href="/assets/js/445.99b6514c.js"><link rel="prefetch" href="/assets/js/446.14d3a0f6.js"><link rel="prefetch" href="/assets/js/447.f636c0af.js"><link rel="prefetch" href="/assets/js/448.959e92db.js"><link rel="prefetch" href="/assets/js/449.6df86903.js"><link rel="prefetch" href="/assets/js/45.a041b08a.js"><link rel="prefetch" href="/assets/js/450.9914d79d.js"><link rel="prefetch" href="/assets/js/451.91944e8c.js"><link rel="prefetch" href="/assets/js/452.8c101302.js"><link rel="prefetch" href="/assets/js/453.d5cbfc75.js"><link rel="prefetch" href="/assets/js/454.124c0659.js"><link rel="prefetch" href="/assets/js/455.c4f820cc.js"><link rel="prefetch" href="/assets/js/456.93b9a861.js"><link rel="prefetch" href="/assets/js/457.7d81f5b2.js"><link rel="prefetch" href="/assets/js/458.eca9be2a.js"><link rel="prefetch" href="/assets/js/459.2938c6db.js"><link rel="prefetch" href="/assets/js/46.274f163c.js"><link rel="prefetch" href="/assets/js/460.6d7b8446.js"><link rel="prefetch" href="/assets/js/461.c63cf54b.js"><link rel="prefetch" href="/assets/js/462.a0adf5db.js"><link rel="prefetch" href="/assets/js/463.24c8a1a3.js"><link rel="prefetch" href="/assets/js/464.87af11bd.js"><link rel="prefetch" href="/assets/js/465.8364a6a5.js"><link rel="prefetch" href="/assets/js/466.95efe6e7.js"><link rel="prefetch" href="/assets/js/467.27430f62.js"><link rel="prefetch" href="/assets/js/468.406d77b3.js"><link rel="prefetch" href="/assets/js/469.c5411cc2.js"><link rel="prefetch" href="/assets/js/47.1f3f336c.js"><link rel="prefetch" href="/assets/js/48.60170da4.js"><link rel="prefetch" href="/assets/js/49.a2220e75.js"><link rel="prefetch" href="/assets/js/5.587460cf.js"><link rel="prefetch" href="/assets/js/50.324e4425.js"><link rel="prefetch" href="/assets/js/51.e6fdf020.js"><link rel="prefetch" href="/assets/js/52.6f90fb4b.js"><link rel="prefetch" href="/assets/js/53.97f5f30a.js"><link rel="prefetch" href="/assets/js/54.44aa3524.js"><link rel="prefetch" href="/assets/js/55.797c0470.js"><link rel="prefetch" href="/assets/js/56.659de1e7.js"><link rel="prefetch" href="/assets/js/57.eaacddd3.js"><link rel="prefetch" href="/assets/js/58.e2c76165.js"><link rel="prefetch" href="/assets/js/59.80bd29af.js"><link rel="prefetch" href="/assets/js/6.61cb913b.js"><link rel="prefetch" href="/assets/js/60.447237d4.js"><link rel="prefetch" href="/assets/js/61.eca41165.js"><link rel="prefetch" href="/assets/js/62.517711c0.js"><link rel="prefetch" href="/assets/js/63.2d6d2059.js"><link rel="prefetch" href="/assets/js/64.183fc8c8.js"><link rel="prefetch" href="/assets/js/65.c60890f1.js"><link rel="prefetch" href="/assets/js/66.214142ff.js"><link rel="prefetch" href="/assets/js/67.7690b077.js"><link rel="prefetch" href="/assets/js/68.fc2f0855.js"><link rel="prefetch" href="/assets/js/69.0acc91da.js"><link rel="prefetch" href="/assets/js/7.c376729c.js"><link rel="prefetch" href="/assets/js/70.c5df5bff.js"><link rel="prefetch" href="/assets/js/71.7790906e.js"><link rel="prefetch" href="/assets/js/72.12f9609c.js"><link rel="prefetch" href="/assets/js/73.1edf6c53.js"><link rel="prefetch" href="/assets/js/74.a3dd19b4.js"><link rel="prefetch" href="/assets/js/75.b8429a49.js"><link rel="prefetch" href="/assets/js/76.28351cb7.js"><link rel="prefetch" href="/assets/js/77.d9e03a06.js"><link rel="prefetch" href="/assets/js/78.8decdae6.js"><link rel="prefetch" href="/assets/js/79.6a4e9abe.js"><link rel="prefetch" href="/assets/js/8.5d9428d5.js"><link rel="prefetch" href="/assets/js/80.c9f4c715.js"><link rel="prefetch" href="/assets/js/81.0bab081e.js"><link rel="prefetch" href="/assets/js/82.5a1e59b5.js"><link rel="prefetch" href="/assets/js/83.313f94ef.js"><link rel="prefetch" href="/assets/js/84.c3ab3b5f.js"><link rel="prefetch" href="/assets/js/85.86008475.js"><link rel="prefetch" href="/assets/js/86.2d675ac8.js"><link rel="prefetch" href="/assets/js/87.6095c6d5.js"><link rel="prefetch" href="/assets/js/88.d2341f54.js"><link rel="prefetch" href="/assets/js/89.4b537082.js"><link rel="prefetch" href="/assets/js/9.18666140.js"><link rel="prefetch" href="/assets/js/90.b23c5097.js"><link rel="prefetch" href="/assets/js/91.da4073d4.js"><link rel="prefetch" href="/assets/js/92.1a7dabc2.js"><link rel="prefetch" href="/assets/js/93.8166954c.js"><link rel="prefetch" href="/assets/js/94.9d0a15cd.js"><link rel="prefetch" href="/assets/js/95.668a87ba.js"><link rel="prefetch" href="/assets/js/96.9787316a.js"><link rel="prefetch" href="/assets/js/97.6dbbe41a.js"><link rel="prefetch" href="/assets/js/98.d7b83957.js"><link rel="prefetch" href="/assets/js/99.2d081394.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b2b5e418.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Web Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础" class="mobile-dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/algorithm/" class="nav-link">
  数据结构和算法
</a></li><li class="dropdown-item"><!----> <a href="/base/computed-network/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/base/fundamentals-of-compiling/" class="nav-link">
  编译原理
</a></li><li class="dropdown-item"><!----> <a href="/base/design-patterns/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/base/software-engineering/" class="nav-link">
  软件工程
</a></li><li class="dropdown-item"><!----> <a href="/base/git/" class="nav-link">
  Git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/front-end/html5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/front-end/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/front-end/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/front-end/node/" class="nav-link router-link-active">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/front-end/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/front-end/engineering/" class="nav-link">
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/business-related/" class="nav-link">
  开发技巧
</a></li><li class="dropdown-item"><!----> <a href="/front-end/project-setup/" class="nav-link">
  开发流程
</a></li><li class="dropdown-item"><!----> <a href="/front-end/applet/" class="nav-link">
  小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/back-end/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/back-end/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/back-end/mongodb/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-item"><!----> <a href="/back-end/mysql/" class="nav-link">
  MySQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><span class="title">Python</span> <span class="arrow down"></span></button> <button type="button" aria-label="Python" class="mobile-dropdown-title"><span class="title">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/syntax/" class="nav-link">
  语法
</a></li><li class="dropdown-item"><!----> <a href="/python/module/" class="nav-link">
  模块
</a></li><li class="dropdown-item"><!----> <a href="/python/crawler/" class="nav-link">
  爬虫
</a></li><li class="dropdown-item"><!----> <a href="/python/automation/" class="nav-link">
  自动化
</a></li></ul></div></div><div class="nav-item"><a href="/r/" class="nav-link">
  R 语言
</a></div><div class="nav-item"><a href="/post/" class="nav-link">
  博文
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="更多" class="mobile-dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/growth/" class="nav-link">
  保持学习
</a></li><li class="dropdown-item"><!----> <a href="/other/tools/" class="nav-link">
  常用工具
</a></li><li class="dropdown-item"><!----> <a href="/other/editor/" class="nav-link">
  编辑器
</a></li><li class="dropdown-item"><!----> <a href="/other/expect-tech/" class="nav-link">
  技术之外
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link">
  关于
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础" class="dropdown-title"><span class="title">基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础" class="mobile-dropdown-title"><span class="title">基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/base/algorithm/" class="nav-link">
  数据结构和算法
</a></li><li class="dropdown-item"><!----> <a href="/base/computed-network/" class="nav-link">
  计算机网络
</a></li><li class="dropdown-item"><!----> <a href="/base/fundamentals-of-compiling/" class="nav-link">
  编译原理
</a></li><li class="dropdown-item"><!----> <a href="/base/design-patterns/" class="nav-link">
  设计模式
</a></li><li class="dropdown-item"><!----> <a href="/base/software-engineering/" class="nav-link">
  软件工程
</a></li><li class="dropdown-item"><!----> <a href="/base/git/" class="nav-link">
  Git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端" class="mobile-dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/front-end/html/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/front-end/html5/" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/front-end/css/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/front-end/javascript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/front-end/node/" class="nav-link router-link-active">
  Node
</a></li><li class="dropdown-item"><!----> <a href="/front-end/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/front-end/engineering/" class="nav-link">
  前端工程化
</a></li><li class="dropdown-item"><!----> <a href="/front-end/business-related/" class="nav-link">
  开发技巧
</a></li><li class="dropdown-item"><!----> <a href="/front-end/project-setup/" class="nav-link">
  开发流程
</a></li><li class="dropdown-item"><!----> <a href="/front-end/applet/" class="nav-link">
  小程序
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow down"></span></button> <button type="button" aria-label="后端" class="mobile-dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/back-end/linux/" class="nav-link">
  Linux
</a></li><li class="dropdown-item"><!----> <a href="/back-end/nginx/" class="nav-link">
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/back-end/docker/" class="nav-link">
  Docker
</a></li><li class="dropdown-item"><!----> <a href="/back-end/mongodb/" class="nav-link">
  MongoDB
</a></li><li class="dropdown-item"><!----> <a href="/back-end/mysql/" class="nav-link">
  MySQL
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python" class="dropdown-title"><span class="title">Python</span> <span class="arrow down"></span></button> <button type="button" aria-label="Python" class="mobile-dropdown-title"><span class="title">Python</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/syntax/" class="nav-link">
  语法
</a></li><li class="dropdown-item"><!----> <a href="/python/module/" class="nav-link">
  模块
</a></li><li class="dropdown-item"><!----> <a href="/python/crawler/" class="nav-link">
  爬虫
</a></li><li class="dropdown-item"><!----> <a href="/python/automation/" class="nav-link">
  自动化
</a></li></ul></div></div><div class="nav-item"><a href="/r/" class="nav-link">
  R 语言
</a></div><div class="nav-item"><a href="/post/" class="nav-link">
  博文
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><span class="title">更多</span> <span class="arrow down"></span></button> <button type="button" aria-label="更多" class="mobile-dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/other/growth/" class="nav-link">
  保持学习
</a></li><li class="dropdown-item"><!----> <a href="/other/tools/" class="nav-link">
  常用工具
</a></li><li class="dropdown-item"><!----> <a href="/other/editor/" class="nav-link">
  编辑器
</a></li><li class="dropdown-item"><!----> <a href="/other/expect-tech/" class="nav-link">
  技术之外
</a></li><li class="dropdown-item"><!----> <a href="/other/" class="nav-link">
  关于
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>全局属性</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>原生模块</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>专题：异步编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>专题：使用技巧</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>专题：框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MySQL</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>MongoDB</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/front-end/node/mongodb/start.html" class="sidebar-link">开始</a></li><li><a href="/front-end/node/mongodb/db&amp;collection.html" class="sidebar-link">数据库和集合</a></li><li><a href="/front-end/node/mongodb/document.html" class="sidebar-link">文档操作</a></li><li><a href="/front-end/node/mongodb/document-pro.html" class="sidebar-link">文档操作进阶</a></li><li><a href="/front-end/node/mongodb/mongoose.html" aria-current="page" class="active sidebar-link">Mongoose</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#开始" class="sidebar-link">开始</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#对比" class="sidebar-link">对比</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#连接" class="sidebar-link">连接</a></li></ul></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#schema" class="sidebar-link">Schema</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#模式" class="sidebar-link">模式</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#路径" class="sidebar-link">路径</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#创建模式" class="sidebar-link">创建模式</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#模式选项" class="sidebar-link">模式选项</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#模式类型" class="sidebar-link">模式类型</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#添加方法" class="sidebar-link">添加方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#model" class="sidebar-link">Model</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#编译模型" class="sidebar-link">编译模型</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#示例" class="sidebar-link">示例</a></li></ul></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#query" class="sidebar-link">Query</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#介绍" class="sidebar-link">介绍</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#获取" class="sidebar-link">获取</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#查询选项" class="sidebar-link">查询选项</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#查询运算符" class="sidebar-link">查询运算符</a></li></ul></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#document" class="sidebar-link">Document</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#操作文档" class="sidebar-link">操作文档</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#增" class="sidebar-link">增</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#删" class="sidebar-link">删</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#改" class="sidebar-link">改</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#查" class="sidebar-link">查</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#聚合" class="sidebar-link">聚合</a></li></ul></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#验证框架" class="sidebar-link">验证框架</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#中间件函数" class="sidebar-link">中间件函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#pre" class="sidebar-link">pre</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#post" class="sidebar-link">post</a></li><li class="sidebar-sub-header"><a href="/front-end/node/mongodb/mongoose.html#示例-2" class="sidebar-link">示例</a></li></ul></li></ul></li><li><a href="/front-end/node/mongodb/mongodb-pro.html" class="sidebar-link">进阶</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Redis</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="开始"><a href="#开始" class="header-anchor">#</a> 开始</h2> <h3 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h3> <p>mongoose 是一个更友好的 MongoDB 驱动，并增强了 mongodb 原生驱动：</p> <ul><li>在某些方面，操作比 mongodb 更容易，如扩展了 Document 对象</li> <li>引入模式和模型的概念，使数据操作更安全</li> <li>支持验证和类型转换</li> <li>支持中间件函数</li></ul> <p>新对象：</p> <ul><li>Schema：定义结构化的模式集合的文档，允许设置字段及其类型、唯一性、索引和验证</li> <li>Model：表示某一集合中所有的文档（类似 Collection 对象）</li> <li>Document：表示某一集合中的某个文档</li> <li>Query：实现查询功能，并可以链式调用（类似 Cursor 和 query 的结合）</li> <li>Aggregate：实现聚合功能（类似 aggregate 对象）</li></ul> <h3 id="对比"><a href="#对比" class="header-anchor">#</a> 对比</h3> <table><thead><tr><th>mongodb</th> <th>mongoose</th></tr></thead> <tbody><tr><td>Db</td> <td></td></tr> <tr><td>Admin</td> <td></td></tr> <tr><td>-</td> <td>Schema</td></tr> <tr><td>Collection</td> <td>Model</td></tr> <tr><td>-</td> <td>Document</td></tr> <tr><td>Cursor</td> <td>Query</td></tr> <tr><td>query</td> <td></td></tr></tbody></table> <h3 id="连接"><a href="#连接" class="header-anchor">#</a> 连接</h3> <ul><li><code>mongoose.connect(dbUrl, options, [callback])</code>：连接数据库
<ul><li>dbUrl：String</li> <li>options：
<ul><li>username：String</li> <li>password：String</li> <li>autoIndex：Boolean，默认 true</li> <li>bufferCommands：Boolean，默认 true</li></ul></li> <li>callback：Function</li></ul></li> <li><code>mongoose.disconnect()</code>：关闭连接</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> test <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'assert'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> dbUrl <span class="token operator">=</span> <span class="token string">'mongodb://localhost:27017/newDB'</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>dbUrl<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> client</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  test<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Connect MongoDB by mongoose.'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>client<span class="token punctuation">)</span>
  mongoose<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="schema"><a href="#schema" class="header-anchor">#</a> Schema</h2> <h3 id="模式"><a href="#模式" class="header-anchor">#</a> 模式</h3> <ul><li>使用 mongoose 时，通常要实现模式，模式为集合中的文档定义字段和字段类型；其中，字段的值支持下列类型：</li></ul> <table><thead><tr><th>字段</th> <th>描述</th></tr></thead> <tbody><tr><td>String</td> <td>字符串</td></tr> <tr><td>Number</td> <td>数值</td></tr> <tr><td>Boolean(Bool)</td> <td>布尔值</td></tr> <tr><td>Array</td> <td>数组</td></tr> <tr><td>Buffer</td> <td>缓冲区</td></tr> <tr><td>Date</td> <td>日期</td></tr> <tr><td>ObjectId(Oid)</td> <td></td></tr> <tr><td>Mixed</td> <td>混合</td></tr> <tr><td>Decimal128</td> <td></td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">建议</p> <ol><li>为每个不同的文档类型都定义一个模式</li> <li>只在每个集合中存储一个文档类型</li></ol></div> <h3 id="路径"><a href="#路径" class="header-anchor">#</a> 路径</h3> <ul><li>mongoose 使用 path(路径) 定义访问子文档(嵌套文档)，即之前的句点语法，只是说法不一样</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>name        <span class="token comment">// 子文档</span>
name<span class="token punctuation">.</span>title  <span class="token comment">// 子文档字段</span>
name<span class="token punctuation">.</span>first
name<span class="token punctuation">.</span>last
</code></pre></div><h3 id="创建模式"><a href="#创建模式" class="header-anchor">#</a> 创建模式</h3> <ul><li>通过创建一个 Schema 对象的实例</li> <li><code>definition</code>：Object。用于描述模式的字段，字段中还能指定<a href="#%E6%A8%A1%E5%BC%8F%E7%B1%BB%E5%9E%8B">模式类型</a></li> <li><code>options</code>：Object。可选<a href="#%E6%A8%A1%E5%BC%8F%E9%80%89%E9%A1%B9">模式选项</a></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span>definition<span class="token punctuation">,</span> options<span class="token punctuation">)</span>
</code></pre></div><ul><li>示例</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> usersSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> String<span class="token punctuation">,</span> required<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> Number
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  collection<span class="token operator">:</span> <span class="token string">'users'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="模式选项"><a href="#模式选项" class="header-anchor">#</a> 模式选项</h3> <table><thead><tr><th>选项</th> <th>说明</th></tr></thead> <tbody><tr><td>autoIndex</td> <td>默认 true。开启对集合的自动索引功能</td></tr> <tr><td>bufferCommands</td> <td>默认 true。缓存由于连接问题而无法完成的命令</td></tr> <tr><td>id</td> <td>默认 true。使模型中的文档有对应于该对象的 _id 值的 id 获取器</td></tr> <tr><td>_id</td> <td>默认 true。自动为文档分配 _id 字段</td></tr> <tr><td>safe</td> <td>默认 true。发出一个写入关注到更新数据库的请求</td></tr> <tr><td>strict</td> <td>默认 true。不会将没定义在模式中的对象保存到数据库中</td></tr> <tr><td>capped</td> <td>指定在封顶集合中支持的最大文档数</td></tr> <tr><td>collection</td> <td>指定用于此 Schema 模型的集合名称(编译模型时会自动连接至该集合)</td></tr> <tr><td>read</td> <td>副本的读取首选项(primary/primaryPreferred/secondary/secondaryPreferred/nearest)</td></tr></tbody></table> <h3 id="模式类型"><a href="#模式类型" class="header-anchor">#</a> 模式类型</h3> <ul><li>在定义字段时，除了定义字段值的类型，还能对其定义一些 <code>schema type</code></li> <li>若写入文档时字段值不能通过验证，会提示并报错</li></ul> <table><thead><tr><th>类别</th> <th>说明</th></tr></thead> <tbody><tr><td><span class="badge tip" style="vertical-align:top;" data-v-15b7b770>索引</span></td> <td></td></tr> <tr><td>index</td> <td>Boolean，是否为该属性创建索引</td></tr> <tr><td>unique</td> <td>Boolean，是否对该属性创建唯一索引</td></tr> <tr><td>sparse</td> <td>Boolean，是否对这个属性创建稀疏索引</td></tr> <tr><td><span class="badge tip" style="vertical-align:top;" data-v-15b7b770>String</span></td> <td></td></tr> <tr><td>lowercase</td> <td>Boolean，是否转换为小写</td></tr> <tr><td>uppercase</td> <td>Boolean，是否转换为大写</td></tr> <tr><td>trim</td> <td>Boolean，是否去除两端空白字符</td></tr> <tr><td>match</td> <td>RegExp，使用正则检查这个值是否匹配</td></tr> <tr><td>enum</td> <td>Array，使用数组检查这个值是否包含</td></tr> <tr><td><span class="badge tip" style="vertical-align:top;" data-v-15b7b770>Number</span></td> <td></td></tr> <tr><td>min</td> <td>Number，检查属性是否大于或等于该值</td></tr> <tr><td>max</td> <td>Number，检查属性是否小于或等于该值</td></tr> <tr><td><span class="badge tip" style="vertical-align:top;" data-v-15b7b770>Date</span></td> <td></td></tr> <tr><td>min</td> <td>Date，检查属性是否大于或等于该值</td></tr> <tr><td>max</td> <td>Date，检查属性是否小于或等于该值</td></tr> <tr><td><span class="badge tip" style="vertical-align:top;" data-v-15b7b770>其他</span></td> <td></td></tr> <tr><td>required</td> <td>Boolean | Function，true 时表示字段必填</td></tr> <tr><td>default</td> <td>Boolean | Function，设置默认值</td></tr> <tr><td>select</td> <td>Boolean，指定 query 的默认 projection</td></tr> <tr><td>alias</td> <td>String，为该字段定义别名</td></tr> <tr><td>validate</td> <td>Function，添加验证器函数</td></tr> <tr><td>get</td> <td>Function，自定义 getter</td></tr> <tr><td>set</td> <td>Function，自定义 setter</td></tr></tbody></table> <ul><li>添加索引：使用 <code>index(Boolean)</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mySchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> String<span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 或者</span>
<span class="token keyword">const</span> mySchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
mySchema<span class="token punctuation">.</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 此时，可以通过 Schema 对象的 indexes() 获取索引字段列表</span>
mySchema<span class="token punctuation">.</span><span class="token function">indexes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>实现字段唯一：<code>unique(Boolean)</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mySchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> String<span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> unique<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>强制字段必须：<code>required(Boolean)</code>(默认情况下创建 Document 实例时若不指定字段，则创建的对象不包含字段)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mySchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> String<span class="token punctuation">,</span> index<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> unique<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> required<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 此时，可以通过 Schema 对象的 requiredPaths() 获取必须字段列表</span>
mySchema<span class="token punctuation">.</span><span class="token function">requiredPaths</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="添加方法"><a href="#添加方法" class="header-anchor">#</a> 添加方法</h3> <ul><li>可以在 <code>Scheme.methods</code> 属性上添加自定义的方法，这样便可以利用 Document 对象调用这些方法:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mySchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> String<span class="token punctuation">,</span>
  age<span class="token operator">:</span> Number
<span class="token punctuation">}</span><span class="token punctuation">)</span> 
<span class="token comment">// 在 Scheme.methods 上定义方法</span>
mySchema<span class="token punctuation">.</span>methods<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span>

<span class="token comment">// 在 Document 对象上使用方法</span>
doc<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// Alice is 26.</span>
</code></pre></div><h2 id="model"><a href="#model" class="header-anchor">#</a> Model</h2> <h3 id="编译模型"><a href="#编译模型" class="header-anchor">#</a> 编译模型</h3> <ul><li><code>mongoose.model()</code>：将 <code>Schema</code> 编译为<code>Model</code>(类似 Collection 对象)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> <span class="token punctuation">[</span>schema<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>collection<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>skipInit<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><ul><li><code>name</code>：String，之后可以通过 <code>mongoose.model(name)</code> 引用该模型</li> <li><code>schema</code>：模式(Schema)对象示例</li> <li><code>collection</code>：String，要连接的集合名。缺省时返回一个 <code>Query</code> 对象</li> <li><code>skipInit</code>：Boolean，默认 false。指定是否跳过初始化，跳过初始化则没有连接到数据库</li></ul> <h3 id="示例"><a href="#示例" class="header-anchor">#</a> 示例</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> Schema <span class="token operator">=</span> mongoose<span class="token punctuation">.</span>Schema
<span class="token keyword">const</span> test <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'assert'</span><span class="token punctuation">)</span>

<span class="token comment">// 连接到数据库</span>
mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'mongodb://localhost:27017/testDB'</span><span class="token punctuation">)</span>
<span class="token comment">// 定义一个 Schema</span>
<span class="token keyword">const</span> usersSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> String<span class="token punctuation">,</span> required<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> Number
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> collection<span class="token operator">:</span> <span class="token string">'users'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 编译 Schema 为 Model</span>
<span class="token keyword">const</span> Users <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">,</span> usersSchema<span class="token punctuation">)</span>

<span class="token keyword">const</span> user1 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Alice'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> user2 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Anna'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> user3 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Zed'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">22</span> <span class="token punctuation">}</span>

<span class="token comment">// 使用 Model 对象的 create() 方法添加文档</span>
Users<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>user1<span class="token punctuation">,</span> user2<span class="token punctuation">,</span> user3<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  test<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> i <span class="token keyword">in</span> arguments<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  mongoose<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">定义和编译 Schema 的步骤不需要连接数据库，因此可以分离 Model 和 Controller</p> <ul><li>model.js</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> Schema <span class="token operator">=</span> mongoose<span class="token punctuation">.</span>Schema

<span class="token keyword">const</span> usersSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> String<span class="token punctuation">,</span> required<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> Number
<span class="token punctuation">}</span><span class="token punctuation">)</span>

mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">,</span> usersSchema<span class="token punctuation">)</span>
</code></pre></div><ul><li>controller.js</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> test <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'assert'</span><span class="token punctuation">)</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./model'</span><span class="token punctuation">)</span>    <span class="token comment">// 可在 main.js 引入</span>

mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'mongodb://localhost:27017/testDB'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> user1 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Alice'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> user2 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Anna'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> user3 <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Zed'</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">22</span> <span class="token punctuation">}</span>

<span class="token keyword">const</span> Users <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">)</span>

Users<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>user1<span class="token punctuation">,</span> user2<span class="token punctuation">,</span> user3<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  test<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'add all success'</span><span class="token punctuation">)</span>
  mongoose<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <h2 id="query"><a href="#query" class="header-anchor">#</a> Query</h2> <h3 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h3> <ul><li>Query 对象允许链式执行一系列的数据库操作，直到使用 <code>exec(callback)</code> 退出</li> <li>在使用 Model 对象的过程中，回调函数是可以缺省的：
<ul><li>带回调函数：方法与 mongodb 模块的 Collection 对象的行为类似</li> <li>不带回调函数：方法返回一个 Query 对象</li></ul></li> <li>获得 Query 对象的途径：
<ul><li>使用 Model 对象的方法，但不指定回调函数</li> <li>从 Query 对象的方法返回另一个 Query 对象</li></ul></li> <li><font color="red">注意</font>：Query 对象最后一定要调用 <code>exec()</code>，才会发出数据库请求触发更改</li></ul> <h3 id="获取"><a href="#获取" class="header-anchor">#</a> 获取</h3> <table><thead><tr><th>方法</th> <th>回调函数第二个参数</th> <th>操作多项</th></tr></thead> <tbody><tr><td>create(objects, [callback])</td> <td>保存的 Document(或数组)</td> <td>✅</td></tr> <tr><td>count([query], [callback])</td> <td>匹配的项数</td> <td></td></tr> <tr><td>distinct([query], [field], [callback])</td> <td>执行结果的 Document 数组</td> <td></td></tr> <tr><td>find([query], [options], [callback])</td> <td>匹配的 Document 数组</td> <td></td></tr> <tr><td>findOne([query], [options], [callback])</td> <td>匹配的第一个 Document 对象</td> <td></td></tr> <tr><td>findAndRemove([query], [options], [callback])</td> <td>删除的 Document 对象</td> <td></td></tr> <tr><td>findOneAndUpdate([query], [update], [options], [callback])</td> <td>...</td> <td></td></tr> <tr><td>remove([query], [options], [callback])</td> <td>...</td> <td></td></tr> <tr><td>update([query], [update], [options], [callback])</td> <td>...</td> <td></td></tr> <tr><td>aggregate(operators, [callback])</td> <td>聚合结果的 js 对象数组</td> <td></td></tr></tbody></table> <h3 id="查询选项"><a href="#查询选项" class="header-anchor">#</a> 查询选项</h3> <ul><li>其中 options 可以设置以下方法(或在 Query 对象上使用)：</li></ul> <table><thead><tr><th>方法</th> <th>描述</th></tr></thead> <tbody><tr><td>setOptions(options)</td> <td><a href="/front-end/node/mongodb/document-pro.html#options">options 选项对象</a></td></tr> <tr><td>limit(number)</td> <td>设置在结果中包含的文档的最大数量</td></tr> <tr><td>select(fields)</td> <td>指定包含在结果集的每个文档中的字段。(还可以指定不存在的字段)</td></tr> <tr><td>sort(fields)</td> <td>以字符串或对象形式指定排序的字段</td></tr> <tr><td>skip(number)</td> <td>指定要在结果集的开头跳过的文档数量</td></tr> <tr><td>read(preference)</td> <td>设置读取首选项(primary/primaryPreferred/secondary/secondaryPreferred/nearest)</td></tr> <tr><td>snapshot(Boolean)</td> <td>为 true 时把查询设置为快照查询</td></tr> <tr><td>safe(Boolean)</td> <td>为 true 时数据库请求对更新操作使用写入关注</td></tr> <tr><td>hint(hints)</td> <td>指定查找文档时要使用或排除的索引</td></tr> <tr><td>comment(string)</td> <td>将 string 连同查询添加到 MongoDB 的日志中</td></tr></tbody></table> <h3 id="查询运算符"><a href="#查询运算符" class="header-anchor">#</a> 查询运算符</h3> <ul><li>即查询子句：</li></ul> <table><thead><tr><th>运算符</th> <th>描述</th></tr></thead> <tbody><tr><td>where(path, [value])</td> <td>为运算符设置当前字段路径</td></tr> <tr><td>gt([path], value)</td> <td>匹配大于指定的 value 的值的文档</td></tr> <tr><td>gte([path], value)</td> <td>匹配大于或等于指定的 value 的值的文档</td></tr> <tr><td>lt([path], value)</td> <td>匹配小于指定的 value 的值的文档</td></tr> <tr><td>lte([path], value)</td> <td>匹配小于或等于指定的 value 的值的文档</td></tr> <tr><td>ne([path], value)</td> <td>匹配不等于指定的 value 的值的文档</td></tr> <tr><td>in([path], Array)</td> <td>匹配存在于指定数组中的文档</td></tr> <tr><td>nin([path], Array)</td> <td>匹配不存在于指定数组中的文档</td></tr> <tr><td>or(conditions)</td> <td>用逻辑 OR 连接查询子句</td></tr> <tr><td>and(conditions)</td> <td>用逻辑 AND 连接查询子句</td></tr> <tr><td>nor(conditions)</td> <td>用逻辑 NOR 连接查询子句</td></tr> <tr><td>exists([path], Boolean)</td> <td>匹配具有指定字段的文档</td></tr> <tr><td>mod([path], value, remainder)</td> <td>对字段的值取模后匹配</td></tr> <tr><td>regex([path], expression)</td> <td>匹配指定正则表达式的文档</td></tr> <tr><td>all([path], array)</td> <td>匹配包含在数组指定的字段的所有数组字段</td></tr> <tr><td>elemMatch([path], criteria)</td> <td>匹配子文档的数组，criteria 为对象或函数</td></tr> <tr><td>size([path], value)</td> <td>匹配数组字段为指定大小的文档</td></tr></tbody></table> <h2 id="document"><a href="#document" class="header-anchor">#</a> Document</h2> <ul><li>使用 Model 对象时，回调函数中的文档属于 Mongoose 的 <code>Document</code> 对象，其继承于 Model 对象，代表集合中的文档</li> <li>可以对文档对象使用一系列的方法来操作文档：</li></ul> <table><thead><tr><th>属性/方法</th> <th>描述</th></tr></thead> <tbody><tr><td>id</td> <td>文档的 _id 值</td></tr> <tr><td>isNew</td> <td>布尔值。表示是否是一个未存储在集合中 Model 的新对象</td></tr> <tr><td>errors</td> <td>文档的错误列表</td></tr> <tr><td>schema</td> <td>定义该文档的模型的 Schema 对象</td></tr> <tr><td>equals(doc)</td> <td>布尔值。返回 Document 对象与 doc 参数指定的文档是否匹配</td></tr> <tr><td>get(path, [type])</td> <td>返回指定路径的值，type 可以强制转换返回值的类型</td></tr> <tr><td>set(path, value, [type])</td> <td>设置指定路径的值，type 可以强制转换返回值的类型</td></tr> <tr><td>update(update, [options], [callback])</td> <td>更新文档</td></tr> <tr><td>save([callback])</td> <td>保存文档。回调函数只接受错误对象</td></tr> <tr><td>remove([callback])</td> <td>删除文档。回调函数只接受错误对象</td></tr> <tr><td>isInit(path)</td> <td>布尔值。当前路径的字段是否已初始化</td></tr> <tr><td>isSelected(path)</td> <td>布尔值。路径的字段是否从结果集中选择的</td></tr> <tr><td>isModified(path)</td> <td>布尔值。路径的字段是否已被修改但未保存</td></tr> <tr><td>markModified(path)</td> <td>把路径标记为正在被修改，触发它保存/更新</td></tr> <tr><td>modifiedPaths()</td> <td>返回已被修改的对象中的路径的数组</td></tr> <tr><td>toJSON()</td> <td>以 JSON 格式显示 Document 对象</td></tr> <tr><td>toObject()</td> <td>以 JS 对象格式显示 Document 对象（没有其属性和方法）</td></tr> <tr><td>toString()</td> <td>以字符串格式显示 Document 对象</td></tr> <tr><td>validate(callback)</td> <td>在文档上执行验证。回调函数只接受错误对象</td></tr> <tr><td>invalidate(path, msg, value)</td> <td>验证失败并将路径标志为无效。msg 指定错误信息，value 指定值</td></tr></tbody></table> <h2 id="操作文档"><a href="#操作文档" class="header-anchor">#</a> 操作文档</h2> <h3 id="增"><a href="#增" class="header-anchor">#</a> 增</h3> <ul><li>添加单个文档：Document 对象的 save()</li> <li>添加多个文档：Model 对象的 create()</li></ul> <h3 id="删"><a href="#删" class="header-anchor">#</a> 删</h3> <ul><li>删除单个文档：Document 对象的 remove()</li> <li>删除多个文档：Model 对象的 remove()</li></ul> <h3 id="改"><a href="#改" class="header-anchor">#</a> 改</h3> <ul><li>修改单个文档：Document 对象的 save()</li> <li>更新多个文档
<ul><li>Model 对象的 update()</li> <li>Document 对象的 update()</li></ul></li></ul> <h3 id="查"><a href="#查" class="header-anchor">#</a> 查</h3> <ul><li>可以在 Model 对象或 Query 对象上执行
<ul><li>find()</li> <li>findOne()</li></ul></li></ul> <h3 id="聚合"><a href="#聚合" class="header-anchor">#</a> 聚合</h3> <ul><li>Model 对象提供了 aggregate() 方法进行聚合操作，同样回调函数是可选的，缺省时会返回一个 Aggregate 对象，可继续进行管道操作</li> <li>Aggregate 对象上可用的方法：</li></ul> <table><thead><tr><th>方法</th> <th>说明</th></tr></thead> <tbody><tr><td>exec(callback)</td> <td>回调函数的第二个参数时 JS 数组对象</td></tr> <tr><td>append(operations)</td> <td>在管道追加额外的操作，可执行多个</td></tr> <tr><td>group(operators)</td> <td>追加 group 操作</td></tr> <tr><td>limit(number)</td> <td>限制结果集数量</td></tr> <tr><td>match(operators)</td> <td>追加 match 操作</td></tr> <tr><td>project(operators)</td> <td>追加 project 投影操作</td></tr> <tr><td>read(preference)</td> <td>指定用于集合的副本读取首选项。(primary</td></tr> <tr><td>skip(number)</td> <td>指定跳过的文档数</td></tr> <tr><td>sort(fields)</td> <td>追加排序操作</td></tr> <tr><td>unwind(arrFields)</td> <td>通过为数组的每个值在聚合集中建立一个新的文档解除其 arrFields 参数</td></tr></tbody></table> <h2 id="验证框架"><a href="#验证框架" class="header-anchor">#</a> 验证框架</h2> <ul><li>可以为字段添加验证函数，当读取或保存文件时，会执行验证函数：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>Users<span class="token punctuation">.</span>mySchema<span class="token punctuation">.</span><span class="token function">path</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> val<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">20</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'Name is too long!'</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>当验证结果为 false 时，第二个字符串参数会写进错误对象的 error 字符串。错误对象具有以下字段：
<ul><li><code>error.errors.&lt;field&gt;.message</code></li> <li><code>error.errors.&lt;field&gt;.type</code></li> <li><code>error.errors.&lt;field&gt;.path</code></li> <li><code>error.errors.&lt;field&gt;.value</code></li> <li><code>error.name</code></li> <li><code>error.message</code></li></ul></li></ul> <h2 id="中间件函数"><a href="#中间件函数" class="header-anchor">#</a> 中间件函数</h2> <ul><li>Mongoose 提供一个中间件框架，在 <strong>Document</strong> 对象上使用 <code>init()</code>、 <code>validate()</code>、 <code>save()</code>、 <code>remove()</code> 方法的前后，会分别执行 <code>pre</code> 和 <code>post</code> 函数</li> <li>这两个中间件函数要在模型编译前使用才有效</li> <li>只有 Document 对象使用上述方法才会触发，Model 对象或 Query 对象的 <code>remove()</code> 不会触发</li></ul> <h3 id="pre"><a href="#pre" class="header-anchor">#</a> pre</h3> <ul><li><code>pre</code> 函数可以被同步或异步执行，回调函数第一个参数为 <code>next</code> 函数</li> <li>同步：最后一步需要手动调用 <code>next</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>mySchema<span class="token punctuation">.</span><span class="token function">pre</span><span class="token punctuation">(</span><span class="token string">'save'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">)</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>异步：第二个参数指定为 <code>true</code>，回调函数额外接收一个 <code>done</code> 参数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>mySchema<span class="token punctuation">.</span><span class="token function">pre</span><span class="token punctuation">(</span><span class="token string">'save'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">next<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">)</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token function">doAsync</span><span class="token punctuation">(</span>done<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="post"><a href="#post" class="header-anchor">#</a> post</h3> <ul><li><code>post</code> 函数的回调函数接收 Document 对象(或对象数组)</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>Users<span class="token punctuation">.</span>mySchema<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'save'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">doc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="示例-2"><a href="#示例-2" class="header-anchor">#</a> 示例</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> Schema <span class="token operator">=</span> mongoose<span class="token punctuation">.</span>Schema
<span class="token keyword">const</span> test <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'assert'</span><span class="token punctuation">)</span>

mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'mongodb://localhost:27017/testDB'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> usersSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> String<span class="token punctuation">,</span> required<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> Number
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> collection<span class="token operator">:</span> <span class="token string">'users'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 使用中间件</span>
usersSchema<span class="token punctuation">.</span><span class="token function">pre</span><span class="token punctuation">(</span><span class="token string">'remove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Before remove.'</span><span class="token punctuation">)</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
usersSchema<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'remove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">doc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'After Remove.'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 编译模型</span>
<span class="token keyword">const</span> Users <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'users'</span><span class="token punctuation">,</span> usersSchema<span class="token punctuation">)</span>

Users<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'Anna'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> doc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  test<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span>
  doc<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    test<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Remove success!'</span><span class="token punctuation">)</span>
    mongoose<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/front-end/node/mongodb/document-pro.html" class="prev">
        文档操作进阶
      </a></span> <span class="next"><a href="/front-end/node/mongodb/mongodb-pro.html">
        进阶
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a0f576ea.js" defer></script><script src="/assets/js/2.8a7b7341.js" defer></script><script src="/assets/js/367.e7f7ec5b.js" defer></script><script src="/assets/js/17.95405c80.js" defer></script>
  </body>
</html>

(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{487:function(s,t,a){"use strict";a.r(t);var e=a(25),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库"}},[s._v("#")]),s._v(" 数据库")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("显示数据库列表：")])])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("show dbs\n")])])]),a("ul",[a("li",[a("strong",[s._v("切换当前数据库：")])])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 方式1: 使用 use 命令，切换到需要使用的数据库")]),s._v("\nuse testDB\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 方式2: 使用 db.getSiblingDB() 方法")]),s._v("\ndb "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" db.getSiblingDB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("'testDB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("ul",[a("li",[a("strong",[s._v("创建数据库：")])])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("use newDB\ndb.createCollection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'newCollection'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[a("code",[s._v("MongoDB")]),s._v(" 没有显式创建数据库的命令，但可以通过直接使用一个不存在的数据库，然后再其上添加一个集合来创建数据库。但是，如果只使用了不存在的数据库而不进行添加集合的操作，数据库并不会保存。")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("删除数据库：")])])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("use newDB\ndb.dropDatabase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[s._v("要删除一个数据库，首先切换到该数据库中，再使用 "),a("code",[s._v("db.dropDatabase()")]),s._v(" 方法进行删除。但是，数据库删除后，"),a("code",[s._v("db")]),s._v(" 句柄依然为当前数据库(即使他已经被删除)，此时若新建一个集合，该数据库便会 "),a("strong",[s._v("复活")]),s._v("。")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("复制数据库：")])])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("db.copyDatabase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("origin, destination, "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("hostname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("db.copyDatabase(origin, destination, [hostname])：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("origin")]),s._v("：要复制的数据库名称")]),s._v(" "),a("li",[a("code",[s._v("destination")]),s._v("：在此 "),a("code",[s._v("MongoDB")]),s._v(" 服务器上要创建的数据库名称")]),s._v(" "),a("li",[a("code",[s._v("hostname")]),s._v("：可选，指定 "),a("code",[s._v("origin")]),s._v(" 数据库所在的 "),a("code",[s._v("MongoDB")]),s._v(" 服务器的主机名(当要在不同的主机复制数据库时)")])])]),s._v(" "),a("h2",{attrs:{id:"集合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#集合"}},[s._v("#")]),s._v(" 集合")]),s._v(" "),a("p",[s._v("  对集合的操作都需要在数据库中进行，因此都需要切换句柄到相应数据库："),a("code",[s._v("use testDB")])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("显示集合：")])])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("use testDB\nshow collections\n")])])]),a("ul",[a("li",[a("strong",[s._v("创建集合：")])])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("use testDB\ndb.createCollection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'newCollection'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("db.createCollection(name, [options])，options 是一个对象，有以下可选属性：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("capped")]),s._v("：布尔值，默认 "),a("code",[s._v("false")]),s._v("。指定了集合是否是一个封顶集合(封顶集合不会增长到比 "),a("code",[s._v("size")]),s._v(" 属性指定的最大规模更大)")]),s._v(" "),a("li",[a("code",[s._v("autoIndexID")]),s._v("：布尔值，默认 "),a("code",[s._v("true")]),s._v("。表明是否自动为集合中的每个文档创建一个 "),a("code",[s._v("_id")]),s._v(" 字段并实现该字段上的索引")]),s._v(" "),a("li",[a("code",[s._v("size")]),s._v("：以字节为单位，用于封顶集合。最旧的文件被删除，腾出空间给新的文件")]),s._v(" "),a("li",[a("code",[s._v("max")]),s._v("：在封顶集合中允许的最大文档数。最旧的文件被删除，腾出空间给新的文件")])])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("删除集合：")])])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("use testDB\ncoll "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" db.getCollection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'newCollection'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取集合句柄")]),s._v("\ncoll.drop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[362],{792:function(t,s,a){"use strict";a.r(s);var n=a(25),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://nodejs.cn/api/timers.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("timer"),a("OutboundLink")],1),t._v("模块暴露了一些全局的 API，用于预定在将来某个时间段调用的函数")]),t._v(" "),a("li",[t._v("定时器函数与 Web 浏览器类似，但使用了不同的内部实现（基于 Node.js 事件循环）")])]),t._v(" "),a("h2",{attrs:{id:"immediate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#immediate"}},[t._v("#")]),t._v(" Immediate")]),t._v(" "),a("p",[a("code",[t._v("setImmediate()")]),t._v(" 返回一个 "),a("code",[t._v("Immediate")]),t._v(" 实例：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("immediate.hasRef()")]),t._v("：")]),t._v(" "),a("li",[a("code",[t._v("immediate.ref()")]),t._v("：")]),t._v(" "),a("li",[a("code",[t._v("immediate.unref()")]),t._v("：")])]),t._v(" "),a("h2",{attrs:{id:"timeout"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#timeout"}},[t._v("#")]),t._v(" Timeout")]),t._v(" "),a("p",[a("code",[t._v("setTimeout()")]),t._v("/"),a("code",[t._v("setInterval()")]),t._v(" 返回一个 "),a("code",[t._v("Timeout")]),t._v(" 实例：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("timeout.hasRef()")]),t._v("：")]),t._v(" "),a("li",[a("code",[t._v("timeout.ref()")]),t._v("：")]),t._v(" "),a("li",[a("code",[t._v("timeout.unref()")]),t._v("：")]),t._v(" "),a("li",[a("code",[t._v("timeout.refresh()")]),t._v("：")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("说明：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("unref()")]),t._v(" 用于自动清除 "),a("code",[t._v("Interval")]),t._v(" 定时器：")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" timer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setInterval")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Interval...'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ntimer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("unref")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Done!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Interval...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Interval...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Done!")]),t._v("\n")])])])]),t._v(" "),a("h2",{attrs:{id:"设置-清除定时器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置-清除定时器"}},[t._v("#")]),t._v(" 设置/清除定时器")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("setImmediate(callback[, ...args])")]),t._v("：在 I/O 事件的回调之后立即执行 callback")]),t._v(" "),a("li",[a("code",[t._v("setTimeout(callback, delay[, ...args]))")]),t._v("：在指定延迟后执行一次 callback")]),t._v(" "),a("li",[a("code",[t._v("setInterval(callback, delay[, ...args]))")]),t._v("：每隔指定延迟执行一次 callback")]),t._v(" "),a("li",[a("code",[t._v("clearImmediate(immediate)")]),t._v("：取消由 "),a("code",[t._v("setImmediate()")]),t._v(" 创建的 "),a("code",[t._v("Immediate")]),t._v(" 对象")]),t._v(" "),a("li",[a("code",[t._v("clearTimeout(timeout)")]),t._v("：取消由 "),a("code",[t._v("setTimeout()")]),t._v(" 创建的 "),a("code",[t._v("Timeout")]),t._v(" 对象")]),t._v(" "),a("li",[a("code",[t._v("clearInterval(timeout)")]),t._v("：取消由 "),a("code",[t._v("setInterval()")]),t._v(" 创建的 "),a("code",[t._v("Timeout")]),t._v(" 对象")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("说明：")]),t._v(" "),a("ul",[a("li",[t._v("当 "),a("code",[t._v("delay")]),t._v(" 不在区间 [1, 2147483647] 内时将设置为 1，非整数值会被截断为整数")]),t._v(" "),a("li",[a("code",[t._v("setTimeout()")]),t._v("/"),a("code",[t._v("setInterval()")]),t._v(" 和浏览器的基本一致")]),t._v(" "),a("li",[t._v("关于 "),a("code",[t._v("setImmediate()")]),t._v("：\n"),a("ul",[a("li",[t._v("多次调用时，"),a("code",[t._v("callback")]),t._v(" 会按照创建的顺序放入一个回调队列等待执行")]),t._v(" "),a("li",[t._v("每次事件循环迭代都会处理整个回调队列")]),t._v(" "),a("li",[t._v("如果是从正在执行的回调中调用，则直到下一次事件循环迭代才会执行")])])])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setImmediate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'immediate - 1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setImmediate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'immediate - 1.1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setImmediate")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'immediate - 2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// immediate - 1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// immediate - 2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// immediate - 1.1")]),t._v("\n")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[209],{625:function(t,s,a){"use strict";a.r(s);var n=a(25),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[t._v("#")]),t._v(" 简介")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.webpackjs.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack"),a("OutboundLink")],1),t._v(" 是一个 JavaScript 应用程序的静态模块打包器(module bundler)")]),t._v(" "),a("li",[t._v("当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("模块化解决的痛点以及为什么选择 webpack：")]),t._v(" "),a("ul",[a("li",[t._v("模块化解决的痛点\n"),a("ul",[a("li",[t._v("全局变量污染")]),t._v(" "),a("li",[t._v("引入 "),a("code",[t._v("js")]),t._v(" 库时依赖模糊")]),t._v(" "),a("li",[t._v("项目壮大时 "),a("code",[t._v("js")]),t._v(" 代码难以维护")]),t._v(" "),a("li",[t._v("不能做到代码分离和按需加载")])])]),t._v(" "),a("li",[t._v("构建工具的区别\n"),a("ul",[a("li",[a("code",[t._v("Webpack")]),t._v("：专注于处理模块化的构建工具，有丰富的插件，开箱即用又可以高度配置")]),t._v(" "),a("li",[a("code",[t._v("Rollup")]),t._v("：新兴的构建工具，有 "),a("code",[t._v("Tree Shaking")]),t._v(" 等功能，但功能不如 "),a("code",[t._v("Webpack")]),t._v(" 完善")]),t._v(" "),a("li",[a("code",[t._v("Gulp")]),t._v("：基于流的构建工具")]),t._v(" "),a("li",[a("code",[t._v("Grunt")]),t._v("：灵活且插件丰富的构建工具")])])])])]),t._v(" "),a("h3",{attrs:{id:"基本概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#基本概念"}},[t._v("#")]),t._v(" 基本概念")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("entry")]),t._v("：webpack 解析模块依赖的入口，但至少需要配置一个入口")]),t._v(" "),a("li",[a("code",[t._v("output")]),t._v("：配置输出代码的位置以及如何输出，默认输出在 "),a("code",[t._v("./dist")]),t._v(" 目录")]),t._v(" "),a("li",[a("code",[t._v("loader")]),t._v("：转换器用于处理非 js 文件，将它们都当作模块处理(在 webpack 中一切文件皆可识别为模块)")]),t._v(" "),a("li",[a("code",[t._v("plugins")]),t._v("：插件，能够扩展 webpack 用于处理各种任务")]),t._v(" "),a("li",[a("code",[t._v("chunk")]),t._v("：代码块，一般由多个模块组合而成")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("说明")]),t._v(" "),a("ul",[a("li",[t._v("尽管官方文档内容多且乱，但 webpack 的使用主要围绕上述四个方面；在了解其配置方法及熟悉 webpack 的基本原理后，掌握 webpack 也不是什么难事")]),t._v(" "),a("li",[t._v("webpack 和官方提供了很多的 loader 和 plugin，我们可以通过 npm 安装使用；但是随着 webpack 以及各 loader、plugin 的升级，配置方法可能会有所变化，因此要特别注意 loader/plugin 依赖的 webpack 版本(如 webpack4+ 中已不再支持 "),a("code",[t._v("extract-text-webpack-plugin")]),t._v(")")])])]),t._v(" "),a("h3",{attrs:{id:"常用-loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用-loader"}},[t._v("#")]),t._v(" 常用 loader")]),t._v(" "),a("ul",[a("li",[t._v("列举一些常用的 loader，更多 loader 参考 "),a("a",{attrs:{href:"https://github.com/webpack-contrib/awesome-webpack#loaders",target:"_blank",rel:"noopener noreferrer"}},[t._v("awesome webpack"),a("OutboundLink")],1)])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("loader")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("font",{attrs:{color:"blue"}},[t._v("加载文件相关")])],1),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("raw-loader")]),t._v(" "),a("td",[t._v("加载文本文件")])]),t._v(" "),a("tr",[a("td",[t._v("file-loader")]),t._v(" "),a("td",[t._v("将文件输出到一个文件夹，在代码中通过相当 "),a("code",[t._v("url")]),t._v(" 去引用")])]),t._v(" "),a("tr",[a("td",[t._v("url-loader")]),t._v(" "),a("td",[t._v("类似 "),a("code",[t._v("file-loader")]),t._v("，但能将小文件以 "),a("code",[t._v("base64")]),t._v(" 的方式注入代码中")])]),t._v(" "),a("tr",[a("td",[t._v("source-map-loader")]),t._v(" "),a("td",[t._v("加载额外的 SourceMap 文件")])]),t._v(" "),a("tr",[a("td",[t._v("svg-inline-loader")]),t._v(" "),a("td",[t._v("将压缩后的 SVG 注入到代码中")])]),t._v(" "),a("tr",[a("td",[t._v("node-loader")]),t._v(" "),a("td",[t._v("加载 Node.js 原生模块文件")])]),t._v(" "),a("tr",[a("td",[t._v("image-loader")]),t._v(" "),a("td",[t._v("加载并压缩图片")])]),t._v(" "),a("tr",[a("td",[t._v("json-loader")]),t._v(" "),a("td",[t._v("加载 JSON 文件")])]),t._v(" "),a("tr",[a("td",[t._v("yaml-loader")]),t._v(" "),a("td",[t._v("加载 YAML 文件")])]),t._v(" "),a("tr",[a("td",[a("font",{attrs:{color:"blue"}},[t._v("编译模板相关")])],1),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("haml-loader")]),t._v(" "),a("td",[t._v("将 "),a("code",[t._v("HAML")]),t._v(" 代码转换成 "),a("code",[t._v("HTML")])])]),t._v(" "),a("tr",[a("td",[t._v("markdown-loader")]),t._v(" "),a("td",[t._v("将 "),a("code",[t._v("Markdown")]),t._v(" 文件转换成 "),a("code",[t._v("HTML")])])]),t._v(" "),a("tr",[a("td",[t._v("pug-loader")]),t._v(" "),a("td",[t._v("将 "),a("code",[t._v("Pug")]),t._v(" 模板转换成 "),a("code",[t._v("Javascript")]),t._v(" 函数")])]),t._v(" "),a("tr",[a("td",[t._v("ejs-loader")]),t._v(" "),a("td",[t._v("将 "),a("code",[t._v("EJS")]),t._v(" 模板转换成 "),a("code",[t._v("Javascript")]),t._v(" 函数")])]),t._v(" "),a("tr",[a("td",[t._v("handlebars-loader")]),t._v(" "),a("td",[t._v("将 "),a("code",[t._v("Handlebars")]),t._v(" 模板转换成 "),a("code",[t._v("Javascript")]),t._v(" 函数")])]),t._v(" "),a("tr",[a("td",[a("font",{attrs:{color:"blue"}},[t._v("转换脚本语言相关")])],1),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("babel-loader")]),t._v(" "),a("td",[t._v("将 "),a("code",[t._v("ES6")]),t._v(" 转换成 "),a("code",[t._v("ES5")])])]),t._v(" "),a("tr",[a("td",[t._v("ts-loader")]),t._v(" "),a("td",[t._v("将 "),a("code",[t._v("TypeScript")]),t._v(" 转换成 "),a("code",[t._v("Javascript")])])]),t._v(" "),a("tr",[a("td",[t._v("awesome-typescript-loader")]),t._v(" "),a("td",[t._v("将 "),a("code",[t._v("TypeScript")]),t._v(" 转换成 "),a("code",[t._v("Javascript")]),t._v("，性能优于 "),a("code",[t._v("ts-loader")])])]),t._v(" "),a("tr",[a("td",[t._v("coffee-loader")]),t._v(" "),a("td",[t._v("将 "),a("code",[t._v("CoffeeScript")]),t._v(" 转换成 "),a("code",[t._v("Javascript")])])]),t._v(" "),a("tr",[a("td",[a("font",{attrs:{color:"blue"}},[t._v("转换样式文件相关")])],1),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("css-loader")]),t._v(" "),a("td",[t._v("加载 "),a("code",[t._v("CSS")]),t._v("，支持模块化、压缩、文件导入等")])]),t._v(" "),a("tr",[a("td",[t._v("style-loader")]),t._v(" "),a("td",[t._v("将 "),a("code",[t._v("CSS")]),t._v(" 代码注入 "),a("code",[t._v("Javascript")]),t._v("，通过 "),a("code",[t._v("DOM")]),t._v(" 操作去加载 "),a("code",[t._v("CSS")])])]),t._v(" "),a("tr",[a("td",[t._v("less-loader")]),t._v(" "),a("td",[t._v("将 "),a("code",[t._v("Less")]),t._v(" 代码转换成 "),a("code",[t._v("CSS")])])]),t._v(" "),a("tr",[a("td",[t._v("sass-loader")]),t._v(" "),a("td",[t._v("将 "),a("code",[t._v("Scss/Sass")]),t._v(" 代码转换成 "),a("code",[t._v("CSS")])])]),t._v(" "),a("tr",[a("td",[t._v("stylus-loader")]),t._v(" "),a("td",[t._v("将 "),a("code",[t._v("Stylus")]),t._v(" 代码转换成 "),a("code",[t._v("CSS")])])]),t._v(" "),a("tr",[a("td",[t._v("postcss-loader")]),t._v(" "),a("td",[t._v("扩展 "),a("code",[t._v("CSS")]),t._v(" 语法")])]),t._v(" "),a("tr",[a("td",[a("font",{attrs:{color:"blue"}},[t._v("检查代码相关")])],1),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("eslint-loader")]),t._v(" "),a("td",[t._v("通过 "),a("code",[t._v("ESLint")]),t._v(" 检查 "),a("code",[t._v("Javascript")]),t._v(" 代码")])]),t._v(" "),a("tr",[a("td",[t._v("tslint-loader")]),t._v(" "),a("td",[t._v("通过 "),a("code",[t._v("TypeScript")]),t._v(" 检查 "),a("code",[t._v("Javascript")]),t._v(" 代码")])]),t._v(" "),a("tr",[a("td",[t._v("mocha-loader")]),t._v(" "),a("td",[t._v("加载 "),a("code",[t._v("Mocha")]),t._v(" 测试用例代码")])]),t._v(" "),a("tr",[a("td",[t._v("coverjs-loader")]),t._v(" "),a("td",[t._v("计算测试的覆盖率")])]),t._v(" "),a("tr",[a("td",[a("font",{attrs:{color:"blue"}},[t._v("其他")])],1),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[t._v("vue-loader")]),t._v(" "),a("td",[t._v("加载 "),a("code",[t._v("Vue")]),t._v(" 单文件组件")])]),t._v(" "),a("tr",[a("td",[t._v("i18n-loader")]),t._v(" "),a("td",[t._v("加载多语言版本，支持国际化")])]),t._v(" "),a("tr",[a("td",[t._v("ignore-loader")]),t._v(" "),a("td",[t._v("忽略部分文件")])]),t._v(" "),a("tr",[a("td",[t._v("ui-component-loader")]),t._v(" "),a("td",[t._v("按需加载组件")])])])]),t._v(" "),a("h3",{attrs:{id:"常用-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用-plugin"}},[t._v("#")]),t._v(" 常用 plugin")]),t._v(" "),a("ul",[a("li",[t._v("列举一些常用的 plugin，更多 plugin 参考"),a("a",{attrs:{href:"https://github.com/webpack-contrib/awesome-webpack#webpack-plugins",target:"_blank",rel:"noopener noreferrer"}},[t._v("awesome webpack"),a("OutboundLink")],1)])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("loader")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("font",{attrs:{color:"blue"}},[t._v("用于修改行为")])],1),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[a("code",[t._v("define-plugin")])]),t._v(" "),a("td",[t._v("定义环境变量")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("context-replacement-plugin")])]),t._v(" "),a("td",[t._v("修改 "),a("code",[t._v("require")]),t._v(" 语句在寻找文件时的默认行为")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("ignore-plugin")])]),t._v(" "),a("td",[t._v("忽略部分文件")])]),t._v(" "),a("tr",[a("td",[a("font",{attrs:{color:"blue"}},[t._v("用于优化")])],1),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[a("code",[t._v("commons-chunk-plugin")])]),t._v(" "),a("td",[t._v("提取公共代码")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("extract-text-webpack-plugin")])]),t._v(" "),a("td",[t._v("提取 "),a("code",[t._v("Javascript")]),t._v(" 中的 "),a("code",[t._v("CSS")]),t._v(" 代码到单独的文件")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("prepack-webpack-plugin")])]),t._v(" "),a("td",[t._v("优化输出的 "),a("code",[t._v("Javascript")]),t._v(" 代码的性能")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("uglifyjs-webpack-plugin")])]),t._v(" "),a("td",[t._v("通过 "),a("code",[t._v("UblifyJS")]),t._v(" 压缩 "),a("code",[t._v("ES6")]),t._v(" 代码")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("webpack-parallel-uglify-plugin")])]),t._v(" "),a("td",[t._v("多线程执行 "),a("code",[t._v("UblifyJS")]),t._v(" 代码压缩")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("webpack-spritesmith")])]),t._v(" "),a("td",[t._v("制作雪碧图")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("dll-plugin")])]),t._v(" "),a("td",[t._v("借鉴 DLL 思想大幅度提升构建速度")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("hot-module-replacement-plugin")])]),t._v(" "),a("td",[t._v("开启模块热替换功能")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("ModuleConcatenationPlugin")])]),t._v(" "),a("td",[t._v("开启 "),a("code",[t._v("WebpackScopeHoisting")]),t._v(" 功能")])]),t._v(" "),a("tr",[a("td",[a("font",{attrs:{color:"blue"}},[t._v("其他")])],1),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",[a("code",[t._v("i18n-webpack-plugin")])]),t._v(" "),a("td",[t._v("国际化支持")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("stylelint-webpack-plugin")])]),t._v(" "),a("td",[t._v("将 "),a("code",[t._v("stylelint")]),t._v(" 集成到项目中")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("serviceworker-webpack-plugin")])]),t._v(" "),a("td",[t._v("为网页应用增加离线缓存功能")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("provide-plugin")])]),t._v(" "),a("td",[t._v("从环境中提供的全局变量中加载模块，而不用导入对应文件")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("web-webpack-plugin")])]),t._v(" "),a("td",[t._v("为单页应用输出 "),a("code",[t._v("HTML")]),t._v("，比 "),a("code",[t._v("html-webpack-plugin")]),t._v(" 好用")])])])]),t._v(" "),a("h2",{attrs:{id:"配置简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置简介"}},[t._v("#")]),t._v(" 配置简介")]),t._v(" "),a("ul",[a("li",[t._v("参考"),a("a",{attrs:{href:"https://www.webpackjs.com/configuration/",target:"_blank",rel:"noopener noreferrer"}},[t._v("完整配置"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("一般采用在项目根目录下创建 "),a("code",[t._v("webpack.config.js")]),t._v(" 的方式来配置使用 webpack，其默认暴露一个对象：")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" MiniCssExtractPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mini-css-extract-plugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  mode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  entry"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[name].js'")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  module"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.css$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        use"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("MiniCssExtractPlugin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("loader"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'css-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MiniCssExtractPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"mode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mode"}},[t._v("#")]),t._v(" mode")]),t._v(" "),a("ul",[a("li",[t._v("不同模式下 webpack 会默认启用不同的插件")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// mode: string")]),t._v("\nmode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'none'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不启用任何插件")]),t._v("\nmode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\nmode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'development'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("备注")]),t._v(" "),a("ul",[a("li",[t._v("development 下会启用插件："),a("code",[t._v("NamedChunksPlugin")]),t._v(", "),a("code",[t._v("NamedModulesPlugin")])]),t._v(" "),a("li",[t._v("production 下会启用插件："),a("code",[t._v("FlagDependencyUsagePlugin")]),t._v(", "),a("code",[t._v("FlagIncludedChunksPlugin")]),t._v(", "),a("code",[t._v("ModuleConcatenationPlugin")]),t._v(", "),a("code",[t._v("NoEmitOnErrorsPlugin")]),t._v(", "),a("code",[t._v("OccurrenceOrderPlugin")]),t._v(", "),a("code",[t._v("SideEffectsFlagPlugin")]),t._v(", "),a("code",[t._v("UglifyJsPlugin")])])])]),t._v(" "),a("h3",{attrs:{id:"entry"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entry"}},[t._v("#")]),t._v(" entry")]),t._v(" "),a("ul",[a("li",[t._v("入口可以有多个，可以使用相对路径")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// entry: string | array | object")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 单个入口")]),t._v("\nentry "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./app/entry'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 多个入口")]),t._v("\nentry "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./app/entry1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./app/entry2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 多个入口，并生成多个 chunk")]),t._v("\nentry "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  a"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./app/entry-a'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  b"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./app/entry-b1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./app/entry-b2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 动态入口：同步")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("entry")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./app/entry1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./app/entry2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 动态入口：异步")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("entry")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./app/entry1'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./app/entry2'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("备注")]),t._v(" "),a("ul",[a("li",[t._v("entry 是 "),a("code",[t._v("string")]),t._v("/"),a("code",[t._v("array")]),t._v(" 时，只会生成一个 chunk，名称为 main")]),t._v(" "),a("li",[t._v("entry 是 "),a("code",[t._v("object")]),t._v(" 时才可能生成多个 chunk，名称为对象对应的键名")]),t._v(" "),a("li",[t._v("entry 是 array 时要搭配 "),a("code",[t._v("output.library")]),t._v(" 使用，这时只有数组最后一个入口文件的模块会被导出")])])]),t._v(" "),a("h3",{attrs:{id:"output"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output"}},[t._v("#")]),t._v(" output")]),t._v(" "),a("ul",[a("li",[t._v("配置 webpack 如何输出结果")])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[t._v("output"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// string，所有输出文件的目标路径，必须是绝对路径")]),t._v("\n  path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// string，配置发布到线上资源的 URL 前缀，能使用 [hash] 变量")]),t._v("\n  publicPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认，使用相对路径")]),t._v("\n  publicPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/assets/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ")]),t._v("\n  publicPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://cdn.example.com/'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// CDN")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// string，输出文件的名称，能使用 [id], [name], [hash], [chunkhash] 等变量")]),t._v("\n  filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bundle.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 只有一个输出文件时，也可以用 [name] 指定")]),t._v("\n  filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[name].js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 有多个入口时，[name] 对应入口文件名")]),t._v("\n  filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[chunkhash].js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用于长效缓存")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 类似 filename，但用于配置无入口的 chunk 的输出文件名")]),t._v("\n  chunkFilename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'[id].js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定运行时如何发出跨域请求问题(仅当 'target: web' 且使用 JSONP 方式按需加载时有效)")]),t._v("\n  crossOriginLoading"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("             "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 禁用跨域加载(默认)")]),t._v("\n  crossOriginLoading"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'anonymous'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不带用户 Cookies")]),t._v("\n  crossOriginLoading"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use-credentials'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 带上用户 Cookies")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("说明：")]),t._v(" "),a("ul",[a("li",[t._v("可供使用的模版字符串：\n"),a("ul",[a("li",[a("code",[t._v("[hash]")]),t._v("：chunk 的唯一标识的 hash 值")]),t._v(" "),a("li",[a("code",[t._v("[chunkhash]")]),t._v("：chunk 内容的 hash 值")]),t._v(" "),a("li",[a("code",[t._v("[name]")]),t._v("：chunk 名称")]),t._v(" "),a("li",[a("code",[t._v("[id]")]),t._v("：chunk 标识，从 0 开始")]),t._v(" "),a("li",[a("code",[t._v("[query]")]),t._v("：模块的查询字符串")])])]),t._v(" "),a("li",[a("code",[t._v("[hash]")]),t._v("/"),a("code",[t._v("[chunkhash]")]),t._v(" 的长度可以使用 "),a("code",[t._v("[hash:16]")]),t._v("(默认20)来指定")])])]),t._v(" "),a("h3",{attrs:{id:"module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module"}},[t._v("#")]),t._v(" module")]),t._v(" "),a("ul",[a("li",[t._v("配置处理模块的规则")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不解析的模块，当某些模块没采用模块化时可以跳过，能提高构建性能")]),t._v("\n  noParse"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("jquery|lodash")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置处理模块的规则")]),t._v("\n  rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 处理非文本文件")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.(gif|png|jpe?g|ept|woff|ttf|svg|pdf)$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      use"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'file-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 处理 js 文件")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.js$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      use"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-loader?cacheDirectory'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 向 babel-loader 传递选项")]),t._v("\n      include"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 只命中 src 目录下的 js 文件，提高搜素速度")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 处理 scss 文件")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.scss$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      use"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'style-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'css-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sass-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 多个 loader 的处理顺序为从后向前")]),t._v("\n      exclude"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node_modules'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 不处理 node_modules 目录下的文件")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当有很多选项传入 loader 时，可用对象表示")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("\\.html$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      use"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'htmllint-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          loader"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'html-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          options"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("备注")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("test")]),t._v(" 和 "),a("code",[t._v("include")]),t._v(" 都是必须匹配选项，"),a("code",[t._v("exclude")]),t._v(" 是必不匹配选项(优先于 "),a("code",[t._v("test")]),t._v("/"),a("code",[t._v("include")]),t._v(")，最佳实践：\n"),a("ul",[a("li",[t._v("只在 test 和 文件名匹配 中使用正则表达式，在 "),a("code",[t._v("include")]),t._v(" 和 "),a("code",[t._v("exclude")]),t._v(" 中使用绝对路径数组")]),t._v(" "),a("li",[t._v("尽量使用 "),a("code",[t._v("include")]),t._v(" 代替 "),a("code",[t._v("exclude")])])])])])]),t._v(" "),a("h3",{attrs:{id:"plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#plugins"}},[t._v("#")]),t._v(" plugins")]),t._v(" "),a("ul",[a("li",[t._v("使用非 webpack 默认插件，都需要导入")]),t._v(" "),a("li",[t._v("插件是一个数组，每个需要使用的插件都要实例化")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" webpack "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导入非 webpack 自带默认插件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" ExtractTextPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'extract-text-webpack-plugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" DashboardPlugin "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'webpack-dashboard/plugin'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在配置中添加插件")]),t._v("\nplugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 构建优化插件")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optimize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("CommonsChunkPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vendor'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vendor-[hash].min.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optimize"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("UglifyJsPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    compress"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      warnings"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      drop_console"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExtractTextPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'build.min.css'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    allChunks"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IgnorePlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("^\\.\\/locale$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("moment$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 编译时(compile time)插件")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DefinePlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'process.env.NODE_ENV'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\"production\"'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// webpack-dev-server 强化插件")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DashboardPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("webpack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("HotModuleReplacementPlugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("h3",{attrs:{id:"resolve"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#resolve"}},[t._v("#")]),t._v(" resolve")]),t._v(" "),a("ul",[a("li",[t._v("选项用于设置模块如何被解析")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("resolve"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 解析第三方模块时应该搜索的目录，可以使用绝对路径或相对路径")]),t._v("\n  modules"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node_modules'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 添加 src 到搜索目录，并使其优先级高于 node_modules")]),t._v("\n  modules"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'node_modules'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模块解析时使用的扩展名，导入相关后缀的模块时可以省略后缀")]),t._v("\n  extensions"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置导入时优先解析 ts 文件")]),t._v("\n  extensions"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ts'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模块别名列表")]),t._v("\n  alias"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 通常用来设置长路径和短路径的映射，导入方式为 import '@css/index.css'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@css'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/styles'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 还可以使用 path.resolve() 拼接")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定结尾的精准匹配，缩小匹配范围，导入方式为 import 'dom'")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dom$'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/util/dom.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 缓存模块，能增加性能，但并不安全(文件夹会改变)，应只缓存不会发生改变的目录/模块")]),t._v("\n  unsafeCache"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 缓存所有")]),t._v("\n  unsafeCache"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("src\\/utils")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 正则")]),t._v("\n  unsafeCache"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("src\\/utils")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 正则数组")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"devserver"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#devserver"}},[t._v("#")]),t._v(" devServer")]),t._v(" "),a("ul",[a("li",[t._v("配置本地开发服务器")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("devServer"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置 devServer http 服务器的根目录，默认为当前执行目录，必须是静态的")]),t._v("\n  contentBase"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 关闭暴露本地文件")]),t._v("\n  contentBase"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'public'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 暴露 '/public' 目录")]),t._v("\n  contentBase"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'public'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'assets'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 暴露多个目录")]),t._v("\n\n  proxy"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求 /api/user 相当于请求 http://localhost:3000/user")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/api'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:3000'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求可不带 /api 前缀")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/api'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      target"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:3000'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      pathRewrite"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'^/api'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n \n  headers"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注入响应头")]),t._v("\n  compress"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认 false，禁用 Gzip 压缩")]),t._v("\n  hot"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认 false，关闭模块热替换")]),t._v("\n  inline"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认 true，开启网页实时预览")]),t._v("\n  https"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认 false，关闭 https")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"配置参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置参考"}},[t._v("#")]),t._v(" 配置参考")]),t._v(" "),a("h3",{attrs:{id:"es6-eslint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#es6-eslint"}},[t._v("#")]),t._v(" ES6 & ESLint")]),t._v(" "),a("ul",[a("li",[t._v("在 webpack 中配置 ES6 需要预先 "),a("a",{attrs:{href:""}},[t._v("配置 babel")])]),t._v(" "),a("li",[t._v("安装依赖：")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -D babel-core babel-loader eslint-loader\n")])])]),a("ul",[a("li",[t._v("webpack.dev.js：")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  modules"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v(".js$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        exclude"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("node_modules")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 排除目录")]),t._v("\n        use"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'babel-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            loader"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'eslint-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            enforce"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pre'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在所有 loader 之前")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  devtool"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'source-map'")]),t._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成 source-map 用于调试")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"scss-postcss"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scss-postcss"}},[t._v("#")]),t._v(" Scss && PostCSS")]),t._v(" "),a("ul",[a("li",[t._v("安装依赖：")])]),t._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -D sass-loader css-loader style-loader postcss-loader\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -D node-sass    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# sass-loader 依赖 node-sass")]),t._v("\n")])])]),a("ul",[a("li",[t._v("webpack.dev.js：")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  module"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n        test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token regex"}},[a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v(".scss$")]),a("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        use"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'style-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'css-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'postcss-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sass-loader'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"单页应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单页应用"}},[t._v("#")]),t._v(" 单页应用")]),t._v(" "),a("h3",{attrs:{id:"同构应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#同构应用"}},[t._v("#")]),t._v(" 同构应用")]),t._v(" "),a("h3",{attrs:{id:"构建-npm-模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建-npm-模块"}},[t._v("#")]),t._v(" 构建 npm 模块")]),t._v(" "),a("h3",{attrs:{id:"构建离线应用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建离线应用"}},[t._v("#")]),t._v(" 构建离线应用")]),t._v(" "),a("h3",{attrs:{id:"结合-npm-script"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#结合-npm-script"}},[t._v("#")]),t._v(" 结合 npm script")]),t._v(" "),a("h3",{attrs:{id:"加载图片"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加载图片"}},[t._v("#")]),t._v(" 加载图片")]),t._v(" "),a("h3",{attrs:{id:"加载-svg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加载-svg"}},[t._v("#")]),t._v(" 加载 SVG")]),t._v(" "),a("h3",{attrs:{id:"加载-source-map"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加载-source-map"}},[t._v("#")]),t._v(" 加载 Source Map")]),t._v(" "),a("h2",{attrs:{id:"性能优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#性能优化"}},[t._v("#")]),t._v(" 性能优化")]),t._v(" "),a("h3",{attrs:{id:"打包的文件体积过大"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包的文件体积过大"}},[t._v("#")]),t._v(" 打包的文件体积过大")]),t._v(" "),a("ul",[a("li",[t._v("异步加载模块")]),t._v(" "),a("li",[t._v("提取第三库")]),t._v(" "),a("li",[t._v("代码压缩")]),t._v(" "),a("li",[t._v("去除不必要的插件")])]),t._v(" "),a("h3",{attrs:{id:"打包速度过慢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包速度过慢"}},[t._v("#")]),t._v(" 打包速度过慢")]),t._v(" "),a("ul",[a("li",[t._v("减少代码体积\n"),a("ul",[a("li",[t._v("使用 "),a("code",[t._v("CommonsChunksPlugin")]),t._v(" 提取多个 "),a("code",[t._v("chunk")]),t._v(" 之间的通用模块，减少总体代码体积\n"),a("ul",[a("li",[t._v("把部分依赖转移到 "),a("code",[t._v("CDN")]),t._v(" 上，避免每次编译过程都由 "),a("code",[t._v("Webpack")]),t._v(" 处理")]),t._v(" "),a("li",[t._v("对一些组件库采用按需加载，避免无用的代码")])])])])]),t._v(" "),a("li",[t._v("减少目录检索范围：在使用 "),a("code",[t._v("loader")]),t._v(" 的时候，通过制定 "),a("code",[t._v("exclude")]),t._v(" 和 "),a("code",[t._v("include")]),t._v(" 选项，减少 "),a("code",[t._v("loader")]),t._v(" 遍历的目录范围，从而加快 "),a("code",[t._v("Webpack")]),t._v(" 编译速度")]),t._v(" "),a("li",[t._v("减少检索路经："),a("code",[t._v("resolve.alias")]),t._v(" 可以配置 "),a("code",[t._v("Webpack")]),t._v(" 模块解析的别名，对于比较深的解析路经，可以对其配置 "),a("code",[t._v("alias")])])]),t._v(" "),a("h3",{attrs:{id:"缩小文件搜索范围"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#缩小文件搜索范围"}},[t._v("#")]),t._v(" 缩小文件搜索范围")]),t._v(" "),a("h3",{attrs:{id:"使用-dllplugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-dllplugin"}},[t._v("#")]),t._v(" 使用 DllPlugin")]),t._v(" "),a("h3",{attrs:{id:"使用-happypack"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-happypack"}},[t._v("#")]),t._v(" 使用 HappyPack")]),t._v(" "),a("h3",{attrs:{id:"使用-paralleluglifyplugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-paralleluglifyplugin"}},[t._v("#")]),t._v(" 使用 ParallelUglifyPlugin")]),t._v(" "),a("h3",{attrs:{id:"自动刷新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动刷新"}},[t._v("#")]),t._v(" 自动刷新")]),t._v(" "),a("h3",{attrs:{id:"模块热替换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块热替换"}},[t._v("#")]),t._v(" 模块热替换")]),t._v(" "),a("h3",{attrs:{id:"区分环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#区分环境"}},[t._v("#")]),t._v(" 区分环境")]),t._v(" "),a("h3",{attrs:{id:"压缩代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#压缩代码"}},[t._v("#")]),t._v(" 压缩代码")]),t._v(" "),a("h3",{attrs:{id:"cdn-加速"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cdn-加速"}},[t._v("#")]),t._v(" CDN 加速")]),t._v(" "),a("h3",{attrs:{id:"tree-shaking"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tree-shaking"}},[t._v("#")]),t._v(" Tree Shaking")]),t._v(" "),a("h3",{attrs:{id:"提取公共代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提取公共代码"}},[t._v("#")]),t._v(" 提取公共代码")]),t._v(" "),a("h3",{attrs:{id:"按需加载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#按需加载"}},[t._v("#")]),t._v(" 按需加载")]),t._v(" "),a("h3",{attrs:{id:"scope-hoisting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scope-hoisting"}},[t._v("#")]),t._v(" Scope Hoisting")]),t._v(" "),a("h3",{attrs:{id:"分析输出"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分析输出"}},[t._v("#")]),t._v(" 分析输出")]),t._v(" "),a("h2",{attrs:{id:"原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[t._v("#")]),t._v(" 原理")]),t._v(" "),a("h3",{attrs:{id:"编译流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编译流程"}},[t._v("#")]),t._v(" 编译流程")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("初始化")]),t._v("：从配置文件和 shell 语句中读取并合并参数，通过参数实例化 "),a("code",[t._v("Compiler")]),t._v(" 对象，加载配置的插件，再调用 "),a("code",[t._v("run()")]),t._v(" 方法开始编译")]),t._v(" "),a("li",[a("strong",[t._v("编译")]),t._v("：根据配置中的 "),a("code",[t._v("entry")]),t._v(" 找出所有入口，并从入口文件出发，调用所有的配置的 loader 对模块进行编译(期间会找到模块依赖的模块，重复执行本步骤直至所有依赖的模块编译完成)")]),t._v(" "),a("li",[a("strong",[t._v("输出")]),t._v("：根据入口和模块间的依赖关系，将模块组合成 chunk，最后将 chunk 转换成文件输出")])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("备注")]),t._v(" "),a("ul",[a("li",[t._v("广播：在上述编译的各个过程中，webpack 会广播特点的事件，plugin 可以通过监听事件执行响应的操作")]),t._v(" "),a("li",[t._v("区分 loader/plugin：\n"),a("ul",[a("li",[a("code",[t._v("loader")]),t._v(" 是转译模块源代码的转换规则，以源代码作为参数并返回转换后的代码，可以同时使用多个")]),t._v(" "),a("li",[a("code",[t._v("plugin")]),t._v(" 将处理函数("),a("code",[t._v("handler")]),t._v(")注册到 webpack 编译过程中的生命周期钩子函数上；当执行每个钩子时插件能够完全访问到编译("),a("code",[t._v("compilation")]),t._v(")的当前状态")])])])])]),t._v(" "),a("h3",{attrs:{id:"打包的过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打包的过程"}},[t._v("#")]),t._v(" 打包的过程")]),t._v(" "),a("ol",[a("li",[t._v("读取文件，分析模块依赖")]),t._v(" "),a("li",[t._v("对模块进行解析执行（深度遍历）")]),t._v(" "),a("li",[t._v("针对不同的模块使用不同的 "),a("code",[t._v("loader")])]),t._v(" "),a("li",[t._v("编译模块，生成抽象语法树（"),a("code",[t._v("AST")]),t._v("）")]),t._v(" "),a("li",[t._v("遍历 "),a("code",[t._v("AST")]),t._v("，输出 "),a("code",[t._v("JS")])])]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("说明：")]),t._v(" "),a("ul",[a("li",[t._v("打包生成哪些文件?")]),t._v(" "),a("li",[t._v("chunk、bundle、module?")])])]),t._v(" "),a("h3",{attrs:{id:"编写-loader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写-loader"}},[t._v("#")]),t._v(" 编写 loader")]),t._v(" "),a("ul",[a("li",[t._v("简单来说，"),a("code",[t._v("loader")]),t._v(" 是一个函数，它接受源代码或上一个 "),a("code",[t._v("loader")]),t._v(" 返回的结果代码作为参数，最后返回一个结果代码")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("someSyncOperation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("content")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// do some operation")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("source")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("someSyncOperation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"编写-plugin"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编写-plugin"}},[t._v("#")]),t._v(" 编写 plugin")]),t._v(" "),a("ul",[a("li",[t._v("简单来说，"),a("code",[t._v("plugin")]),t._v(" 是一个类，它初始化实例后会执行类的 "),a("code",[t._v("apply()")]),t._v(" 方法为插件实例传入 "),a("code",[t._v("compiler")]),t._v(" 对象，该对象内定义了回调钩子监听 "),a("code",[t._v("Webpack")]),t._v(" 的变化")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FirstPlugin")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("successHandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" failHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("successHandler "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" successHandler\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("failHandler "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" failHandler\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  \n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apply")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("compiler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    compiler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("plugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'done'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("state")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("successHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    compiler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("plugin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'failed'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("failHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" FirstPlugin\n")])])]),a("h3",{attrs:{id:"热部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#热部署"}},[t._v("#")]),t._v(" 热部署")]),t._v(" "),a("h3",{attrs:{id:"热更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#热更新"}},[t._v("#")]),t._v(" 热更新")])])}),[],!1,null,null,null);s.default=e.exports}}]);
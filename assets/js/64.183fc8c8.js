(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{474:function(s,t,a){"use strict";a.r(t);var e=a(25),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[s._v("#")]),s._v(" 概念")]),s._v(" "),a("h3",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("用户标识符")]),s._v("：每个登陆的用户至少有两个 ID，UID(User ID)和 GID(Group ID)")]),s._v(" "),a("li",[a("strong",[s._v("用户登录的过程")]),s._v("：\n"),a("ol",[a("li",[s._v("查找 /etc/passwd 中是否有相关账号 -> 读出对应的 UID、GID(/etc/group)、用户 home、用户 shell 设置")]),s._v(" "),a("li",[s._v("核对密码表：在 /etc/shadow 中找到账号和 UID，核对记录的密码是否相符")]),s._v(" "),a("li",[s._v("登录成功，进入 shell 管理")])])])]),s._v(" "),a("h3",{attrs:{id:"etc-passwd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etc-passwd"}},[s._v("#")]),s._v(" /etc/passwd")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("/etc/passwd")]),s._v("：每一行代表一个账号，包括系统账号(bin, daemon, adm 等)和用户账号，不要随便删除")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# head -n 4 /etc/passwd ")]),s._v("\nroot:x:0:0:root:/root:/bin/bash\nbin:x:1:1:bin:/bin:/sbin/nologin\ndaemon:x:2:2:daemon:/sbin:/sbin/nologin\nadm:x:3:4:adm:/var/adm:/sbin/nologin\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按照顺序每行有 7 个值，使用 : 隔开")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1.账号名称：用来登录系统的用户名")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2.密码：为了安全，密码数据存放至 /etc/shadow 中，这里都显示 x")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3.UID：用户标识符，通常 root 为 0，1～999 为系统账号，1000～60000 为可登录账号(目前已支持42多亿的数值)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4.GID：用户组标识符，与 /etc/group 有关")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 5.用户信息说明")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 6.用户 home 目录，默认为 /home/youName")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 7.shell 目录：登录后启用的 shell")]),s._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示：")]),s._v(" "),a("ul",[a("li",[s._v("将 UID 修改为 0 后，该用户会拥有 root 权限，但不建议滥用")]),s._v(" "),a("li",[s._v("当想禁止登录后获取 shell 环境，可以配置 shell 为 "),a("code",[s._v("/sbin/nologin")]),s._v("，常用来制作纯 pop 邮件账号的数据")])])]),s._v(" "),a("h3",{attrs:{id:"etc-shadow"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etc-shadow"}},[s._v("#")]),s._v(" /etc/shadow")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("/etc/shadow")]),s._v("：账号的密码相关记录")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# head -n 4 /etc/shadow")]),s._v("\nroot:"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$1")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$kPXBoqUi")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$aCJQX1fw55EnrvydRrm3X0")]),s._v(":18200:0:99999:7:::\nbin:*:17834:0:99999:7:::\ndaemon:*:17834:0:99999:7:::\nadm:*:17834:0:99999:7:::\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按顺序每行有 9 个值")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1.账号名称")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2.密码摘要：当修改为 ! 或 * 时，可让密码暂时失效")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3.最近修改密码的日期：以天数为单位")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4.密码不可被修改的天数：对比 3 计算")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 5.密码需要重新修改的天数：对比 3 计算，否则密码会被视为过期(需要重设密码才能登录)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 6.密码需要修改前的警告天数：对比 5 计算")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 7.密码过期后的宽限天数：对比 5 计算")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 8.密码失效日期：以天数为单位，过期后将无法使用，常用于收费服务中")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 9.保留值")]),s._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示：")]),s._v(" "),a("ul",[a("li",[s._v("当想要限制某个用户登录时，只需要修改它的密码为 ! 或 *")]),s._v(" "),a("li",[s._v("密码失效日期可用于收费服务中")]),s._v(" "),a("li",[s._v("查看 shadow 使用的加密机制：")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("authconfig --test "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" hashing\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# password hashing algorithm is md5")]),s._v("\n")])])]),a("ul",[a("li",[s._v("一般用户忘记密码：通过 root 用户修改密码")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# root 用户使用 passwd 命令修改指定用户的密码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" tester\n")])])]),a("ul",[a("li",[s._v("忘记 root 密码：\n"),a("ul",[a("li",[s._v("重启进入单人维护模式，此时系统会给予 root 权限的 bash 接口，再使用 passwd 命令修改密码即可")]),s._v(" "),a("li",[s._v("以 Live CD 启动后挂载根目录，将 /etc/shadow 中 root 的密码清空，重启后不用密码即可登录，再使用 passwd 修改即可")])])])])]),s._v(" "),a("h3",{attrs:{id:"etc-group"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etc-group"}},[s._v("#")]),s._v(" /etc/group")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("/etc/group")]),s._v("：用户组配置")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# head -n 4 /etc/group")]),s._v("\nroot:x:0:\nbin:x:1:\ndaemon:x:2:\nsys:x:3:\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按顺序每行有 4 个值")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1.组名：基本上与 GID 对应")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2.用户组密码：很少使用，通常给用户组管理员使用，密码数据存放至 /etc/shadow 中，这里都显示 x")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3.GID：用户组标识符")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4.用户组支持的账号列表：需要加入该用户组的用户名，使用 , 隔开，不能有空格")]),s._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示：")]),s._v(" "),a("ul",[a("li",[s._v("初始化用户组：用户登录后拥有的其对应用户组的权限，即用户自身的 "),a("code",[s._v("/etc/group")]),s._v(" 的第四个值可以为空")]),s._v(" "),a("li",[s._v("有效用户组："),a("code",[s._v("groups")]),s._v(" 命令返回的第一个值，保证创建文件时的用户组归属")])])]),s._v(" "),a("h3",{attrs:{id:"etc-gshadow"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etc-gshadow"}},[s._v("#")]),s._v(" /etc/gshadow")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("/etc/gshadow")]),s._v("：与 "),a("code",[s._v("/etc/group")]),s._v(" 基本一样")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# head -n 4 /etc/gshadow")]),s._v("\nroot:::\nbin:::\ndaemon:::\nsys:::\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 按顺序每行有 4 个值")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1.组名")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2.密码：为空或 ! 时，表示该用户组没有用户组管理员")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3.用户组管理员的账号：相关信息在 gpasswd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4.用户组支持的账号列表：与 /etc/group 相同")]),s._v("\n")])])]),a("h2",{attrs:{id:"命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[s._v("#")]),s._v(" 命令")]),s._v(" "),a("h3",{attrs:{id:"用户组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户组"}},[s._v("#")]),s._v(" 用户组")]),s._v(" "),a("Base-BadgeList",{attrs:{list:["groups","newgrp","groupadd","groupmod","groupdel","gpasswd"]}}),s._v(" "),a("h4",{attrs:{id:"groups"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#groups"}},[s._v("#")]),s._v(" groups")]),s._v(" "),a("ul",[a("li",[s._v("当前用户支持的用户组")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("groups")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 结果列表以空格分开，且第一个是有效用户组")]),s._v("\n")])])]),a("h4",{attrs:{id:"newgrp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#newgrp"}},[s._v("#")]),s._v(" newgrp")]),s._v(" "),a("ul",[a("li",[s._v("切换有效用户组，会启用一个新的 shell 执行该命令，结束后应手动 exit 退出")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("newgrp "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" hello.txt "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建一个文件，所属会变为 users")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 手动退出当前 shell")]),s._v("\n")])])]),a("h4",{attrs:{id:"groupadd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#groupadd"}},[s._v("#")]),s._v(" groupadd")]),s._v(" "),a("ul",[a("li",[s._v("新建用户组")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-gr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("用户组名称"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -g：接 GID")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -r：建立系统用户组，与 /etc/login.defs 的 GID_MIN 相关")]),s._v("\n")])])]),a("h4",{attrs:{id:"groupmod"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#groupmod"}},[s._v("#")]),s._v(" groupmod")]),s._v(" "),a("ul",[a("li",[s._v("修改用户组(不要随意修改，防止系统资源错乱)")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-gn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("用户组名称"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -g：接 GID")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -n：接 旧用户组名称")]),s._v("\n")])])]),a("h4",{attrs:{id:"groupdel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#groupdel"}},[s._v("#")]),s._v(" groupdel")]),s._v(" "),a("ul",[a("li",[s._v("删除用户组(当用账号使用该用户组为初始化用户组时，便不能直接删除)")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupdel")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("用户组名称"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("h4",{attrs:{id:"gpasswd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gpasswd"}},[s._v("#")]),s._v(" gpasswd")]),s._v(" "),a("ul",[a("li",[s._v("用户组管理员专用，用于将用户加入/移出用户组(需先添加用户组管理员)")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("gpasswd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("用户组名称"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 直接设置用户组密码，关联 /etc/gshadow")]),s._v("\ngpasswd "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-A user1,"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-M user3,"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("用户组名称"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\ngpasswd "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-rR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("用户组名称"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\ngpasswd "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-ad"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("用户名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("用户组名称"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -A：将用户组的管理权限交给后面的用户")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -M：添加后面的账号到该用户组")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -r：删除用户组的密码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -R：使用户组的密码失效")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -a：为用户组添加一个用户")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -d：从用户组删除一个用户")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 示例：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1.先设置用户组管理员")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" team  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新建用户组")]),s._v("\ngpasswd team   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置用户组密码")]),s._v("\ngpasswd -a tester team  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加 tester 到用户组")]),s._v("\ngpasswd -A tester team  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置 tester 为用户组管理员")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2.再登录该用户组管理员，便可用该用户管理用户组")]),s._v("\ngpasswd -a student team "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tester 将 student 添加到用户组")]),s._v("\n")])])]),a("h3",{attrs:{id:"账号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#账号"}},[s._v("#")]),s._v(" 账号")]),s._v(" "),a("Base-BadgeList",{attrs:{list:["useradd","usermod","userdel","passwd","change","id","finger","chfn","chsh"]}}),s._v(" "),a("h4",{attrs:{id:"useradd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#useradd"}},[s._v("#")]),s._v(" useradd")]),s._v(" "),a("ul",[a("li",[s._v("添加新用户")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-ugGmMcdsef"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("用户名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -u：接 UID")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -g：接 初始化用户组，对应 /etc/pasaswd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -G：接 账号加入的用户组，对应 /etc/group")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -m：建立 home 目录(一般账号默认值)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -M：不建立 home 目录(系统账号默认值)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -c：接 说明栏，对应 /etc/passwd")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -d：接 home 目录的据对路径")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -s：接 shell 的路径(默认 /bin/bash)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -r：建立系统账号")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -e：接 账号失效日期，格式为 YYYY-MM-DD")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -f：接 密码是否会失效，0 为立即失效，-1 为永不失效")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" -D  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 useradd 的默认值")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/login/defs  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 UID/GID 的密码参数参考值")]),s._v("\n")])])]),a("h4",{attrs:{id:"usermod"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usermod"}},[s._v("#")]),s._v(" usermod")]),s._v(" "),a("ul",[a("li",[s._v("修改用户信息")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("usermod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-cdeg-GlsuLU"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("用户名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -c：接 账号说明")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -d：接 home 目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -e：接 账号失效日期，格式 YYYY-MM-DD")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -f：接 密码失效日期的天数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -g：接 初始化用户组")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -G：接 次要用户组")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -a：与 —G 合用，意为添加(append)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -l：接 账号名")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -s：接 shell 路径")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -u：接 UID")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -L：锁住密码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -U：解锁密码")]),s._v("\n")])])]),a("h4",{attrs:{id:"userdel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#userdel"}},[s._v("#")]),s._v(" userdel")]),s._v(" "),a("ul",[a("li",[s._v("删除用户")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("userdel")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-r"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("用户名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -r：同时删除 home 目录，会删除该用户的所有数据！")]),s._v("\n")])])]),a("h4",{attrs:{id:"passwd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#passwd"}},[s._v("#")]),s._v(" passwd")]),s._v(" "),a("ul",[a("li",[s._v("修改用户密码")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("--stdin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-lsSnxwi"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("用户名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --stdin：使用管道数据，常用与 shell 脚本")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -l：Lock，在 /etc/shadow 中密码前添加 !，使密码失效")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -u：Unlock")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -n：接 不可修改密码的天数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# x：接 多久要修改密码的天数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -w：接 密码过期前的警告天数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -i：接 密码失效日期(天数为单位)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -S：列出用户密码的相关参数")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不加用户名为设置 root 的密码，要特别注意！")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'123abc'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" --stdin tester  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过管道设置密码，但不安全(命令会记录在 /root/.bash_history)")]),s._v("\n")])])]),a("h4",{attrs:{id:"change"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#change"}},[s._v("#")]),s._v(" change")]),s._v(" "),a("ul",[a("li",[s._v("修改用户密码")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("chage "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-ldEImMW"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("用户名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -l：列出用户密码的详细参数(包括文字描述)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -d：接 最近修改密码的日期，格式 YYYY-MM-DD")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -E：接 账号失效日期，格式 YYYY-MM-DD")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -I：接 密码过期后的宽限天数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -m：接 密码不能修改的天数")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -M：接 密码需要多少天后进行修改")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -W：接 密码过期前警告天数")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tip：给予学生等同于用户名的密码登录，并要求登录后必须设置密码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" student\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'student'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" --stdin student\nchage -d "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" student  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户登录时会要求重设密码")]),s._v("\n")])])]),a("h4",{attrs:{id:"id"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#id"}},[s._v("#")]),s._v(" id")]),s._v(" "),a("ul",[a("li",[s._v("查询用户的 UID/GID 信息")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("用户名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询当前用户")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" tester  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询指定用户")]),s._v("\n")])])]),a("h4",{attrs:{id:"finger"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#finger"}},[s._v("#")]),s._v(" finger")]),s._v(" "),a("ul",[a("li",[s._v("查看用户信息，大部分位于 /etc/passwd 中，因为比较危险，很多新版本默认不再安装")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("finger "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-sm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("用户名"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("h4",{attrs:{id:"chanfn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#chanfn"}},[s._v("#")]),s._v(" chanfn")]),s._v(" "),a("ul",[a("li",[s._v("change finger")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("chfn "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-foph"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("用户名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("h4",{attrs:{id:"chsh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#chsh"}},[s._v("#")]),s._v(" chsh")]),s._v(" "),a("ul",[a("li",[s._v("change shell")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("chsh "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-ls"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -l：列出系统可用的 shell，实际为 /etc/shells 的内容")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -s：修改自身的 shell")]),s._v("\n")])])]),a("h3",{attrs:{id:"切换用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#切换用户"}},[s._v("#")]),s._v(" 切换用户")]),s._v(" "),a("Base-BadgeList",{attrs:{list:["su","sudo"]}}),s._v(" "),a("h4",{attrs:{id:"su"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#su"}},[s._v("#")]),s._v(" su")]),s._v(" "),a("ul",[a("li",[s._v("切换用户身份，每次切换后都可使用 exit 回到上层用户")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-lmc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("用户名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 空：直接切换至 root(非登录 shell，很多原本的变量不会修改)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -：单个横线，切换至 root，并使用 login-shell 的变量文件读取方式来登录系统")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -l：接 用户名")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -m：使用目前的环境配置(不读取新使用者的配置文件)，和 -p 是一样的")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -c：接 命令内容，仅执行一次命令")]),s._v("\n")])])]),a("h4",{attrs:{id:"sudo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sudo"}},[s._v("#")]),s._v(" sudo")]),s._v(" "),a("ul",[a("li",[s._v("以 root 身份执行命令，使用该命令的用户要先获得 root 的授权("),a("code",[s._v("/etc/sudoers")]),s._v(" 规定)，并输入自身的密码")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-bu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("command"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -b：将后续命令放到后台中让系统自动执行，而不与目前的 shell 产生影响")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -u：接切换的使用者，默认为 root")]),s._v("\n")])])]),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("配置 sudoers：")]),s._v(" "),a("ul",[a("li",[s._v("使用 "),a("code",[s._v("visudo")]),s._v(" 命令编辑 "),a("code",[s._v("/etc/sudoers")]),s._v(" 文件，因为该文件设置过语法，直接使用 vim 会导致语法错误，使用 "),a("code",[s._v("visudo")]),s._v(" 修改后系统会检测其语法")]),s._v(" "),a("li",[a("code",[s._v("sudo")]),s._v(" 是有时间限制的，一般 5 分钟内再次使用不用输入密码")]),s._v(" "),a("li",[s._v("单一用户使用 root 所有命令：")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("visudo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# root 的权限是这样的，ALL 表示任何身份、主机或命令")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户  登录者的来源主机=(可切换的身份)  可执行的命令")]),s._v("\n  root            "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ALL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ALl             All\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以同样方式设置其他信任用户")]),s._v("\ntester "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ALL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ALL ALL\n")])])]),a("ul",[a("li",[s._v("通过 wheel 用户组配置多个用户:")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("visudo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加一行(centos7 已默认添加)，% 开头表示 wheel 为用户组，添加至该用户组的用户都能使用 sudo")]),s._v("\n%wheel "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ALL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ALL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ALL\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进阶：免密使用")]),s._v("\n%wheel "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ALL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ALL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" NOPASSWD:ALL\n")])])]),a("ul",[a("li",[s._v("有限制的命令操作：")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("visudo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置一行，给予用户修改其他用户密码的权限，但不能修改 root 密码，! 开头表示禁止使用")]),s._v("\ntester "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ALL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("/usr/bin/passwd, /usr/bin/passwd "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("A-Za-z"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("*, "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("/usr/bin/passwd root\n")])])]),a("ul",[a("li",[s._v("使用别名：")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("visudo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置别名，对于管理批量账号很有用，只需要管理这些别名数据，还有个 Host_Alias(来源主机别名)")]),s._v("\nUser_Alias ADMPW "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pro1, pro2, user1, user2\nCmnd_Alias ADMPWCOM "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("/usr/bin/passwd, /usr/bin/passwd "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("A-Za-z"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("*, "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("/usr/bin/passwd root\nADMPW "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ALL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" AMDPWCOM\n")])])]),a("ul",[a("li",[s._v("搭配 su 使用：")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("visudo\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 该组用户只需要使用 `sudo su -` 并输入自身的密码，便可以切换至 root 身份")]),s._v("\nUser_Alias ADMPW "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pro1, pro2, user1, user2\nADMPW "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ALL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" /bin/su -\n")])])])]),s._v(" "),a("h3",{attrs:{id:"用户信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户信息"}},[s._v("#")]),s._v(" 用户信息")]),s._v(" "),a("Base-BadgeList",{attrs:{list:["w","who","last","lastlog","write","wall","mail"]}}),s._v(" "),a("h4",{attrs:{id:"w"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#w"}},[s._v("#")]),s._v(" w")]),s._v(" "),a("ul",[a("li",[s._v("显示登录到系统的用户信息")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("w "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-hisV"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("用户名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -h：不显示输出信息的标题")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -i：用长格式输出")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -s：用短格式输出")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -V：显示版本信息")]),s._v("\n")])])]),a("h4",{attrs:{id:"who"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#who"}},[s._v("#")]),s._v(" who")]),s._v(" "),a("ul",[a("li",[s._v("显示目前登录到系统的用户")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("who")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-ablmqrsuw"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("文件名"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -a：列出所有信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -b：列出系统最近启动的日期")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -l：列出所有可登录的终端信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -m：仅列出当前终端信息(相当于 `who am i`)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -q：列出再本地系统的用户和用户数的清单")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -r：显示当期系统的运行级别")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -s：仅显示名称、终端和时间信息(是该命令默认的输出)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -u：列出用户名、登录终端、登录时间、终端活动和进程标识")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# -w/-T：显示 tty 终端的状态(`+` 表示对任何人可写，`-` 表示仅对 root 用户可写，`?` 表示遇到终端故障)")]),s._v("\n")])])]),a("h4",{attrs:{id:"last"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#last"}},[s._v("#")]),s._v(" last")]),s._v(" "),a("ul",[a("li",[s._v("显示目前与过去登入系统的用户相关信息")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("last -10    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示最近 10 条记录")]),s._v("\n")])])]),a("h4",{attrs:{id:"lastlog"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lastlog"}},[s._v("#")]),s._v(" lastlog")]),s._v(" "),a("ul",[a("li",[s._v("每个用户的最近登录事件，默认读取 "),a("code",[s._v("/var/log/lastlog")]),s._v(" 文件")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("lastlog\n")])])]),a("h4",{attrs:{id:"write"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#write"}},[s._v("#")]),s._v(" write")]),s._v(" "),a("ul",[a("li",[s._v("将信息传给其他在线用户")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("write")]),s._v(" tester pts/2  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 需要输入其他用户及其终端界面")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 之后可输入内容，按 enter 发送信息，ctrl-d 停止发送")]),s._v("\n")])])]),a("h4",{attrs:{id:"wall"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wall"}},[s._v("#")]),s._v(" wall")]),s._v(" "),a("ul",[a("li",[s._v("发出广播")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("wall "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello everybody!'")]),s._v("\n")])])]),a("h4",{attrs:{id:"mesg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mesg"}},[s._v("#")]),s._v(" mesg")]),s._v(" "),a("ul",[a("li",[s._v("允许/禁止接受信息，但不能禁止 root 发出的信息")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("mesg n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不接收信息")]),s._v("\nmesg y  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 接收信息")]),s._v("\n")])])]),a("h4",{attrs:{id:"mail"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mail"}},[s._v("#")]),s._v(" mail")]),s._v(" "),a("ul",[a("li",[s._v("发送/读取邮件，不需要用户在线，一般来说邮件保存在 "),a("code",[s._v("/var/spool/mail/username")]),s._v(" 中")])]),s._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("\n")])])]),a("h2",{attrs:{id:"acl"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#acl"}},[s._v("#")]),s._v(" ACL")]),s._v(" "),a("h2",{attrs:{id:"pam"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pam"}},[s._v("#")]),s._v(" PAM")])],1)}),[],!1,null,null,null);t.default=n.exports}}]);
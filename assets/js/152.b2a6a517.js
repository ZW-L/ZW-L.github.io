(window.webpackJsonp=window.webpackJsonp||[]).push([[152],{563:function(s,t,n){"use strict";n.r(t);var a=n(25),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"简介"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),n("ul",[n("li",[s._v("搭建私有的 git 仓库")])]),s._v(" "),n("h2",{attrs:{id:"入门"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#入门"}},[s._v("#")]),s._v(" 入门")]),s._v(" "),n("ul",[n("li",[s._v("服务器配置")])]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装 git")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建新用户(名为 git)来管理 git")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" adduser "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用证书登陆，将信任的用户的公钥拷贝到 /home/git/.ssh/authorized_keys")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 客户端可使用 scp 命令或其他方式上传公钥")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" id_rsa.pub "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" authorized_keys\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f id_rsa.pub\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在 /svr 目录下创建空仓库(--bare 参数)")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /svr "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" init --bare sample.git\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改权限")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R git:git sample.git\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编辑 /etc/passwd 防止 git 用户登陆 shell")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/passwd\ngit:x:1001:1001:,,,:/home/git:/usr/bin/git-shell "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 之前为 bash")]),s._v("\n")])])]),n("ul",[n("li",[s._v("本地客户端")])]),s._v(" "),n("div",{staticClass:"language-sh extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sh"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 补充：上传本机公钥，server 替换为服务器或 ip 地址")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" ~/.ssh/id_rsa.pub git@server:/home/git/.ssh\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 确保已安装 git，server 替换为服务器或 ip 地址")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone git@server:/srv/sample.git\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" README\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" README\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit -m "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"add readme"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin master\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);
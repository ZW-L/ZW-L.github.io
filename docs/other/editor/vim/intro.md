---
sidebarDepth: 2
---

## 介绍

+ 参考：
  + [简明 vim 练级攻略](https://coolshell.cn/articles/5426.html)
  + [vim 教程网](https://vimjc.com/)
+ 一个不需要使用鼠标和小键盘，只需要使用大键盘就可以完成很多复杂功能的文本编辑器
+ 除了输入文本外，normal 是使用最多的模式，就是它让我们完全抛弃了鼠标



## 四种模式


|模式|描述|切换|
|-|-|-|
|normal(正常模式)|打开文件的默认模式，所有按键都是功能键|任何模式下按 Esc 进入|
|insert(插入模式)|相当于一般编辑器的编辑模式|normal 模式下使用 i,a,o,s/I,A,O,S 进入|
|command(命令模式)|可设置或执行一系列命令|normal 模式下使用 : 进入|
|visual(可视化模式)|可批量选择文本|normal 模式下使用 v/V 进入|

::: tip 备注：
+ 进入插入模式：
  + i/I(insert)：在光标前/行首开始插入
  + a/A(append)：在光标后/行尾附加
  + s/S()：删除光标所在字符/所在行后再插入
  + o/O()：在光标所在行下面/上面新建空行后再插入
+ 进入可视化模式：
  + v：可视化行，最小选择单位为单个字符
  + V：可视化块，最小选择单位为行
:::



## 基本命令

约定：
+ `/`：分割多个操作
+ `C-y`：表示组合键 `<Ctrl + y>`
+ `[Esc]`：表示按键 `<Esc>`
+ `:` 开头：表示为命令模式后，再单击 `<Enter>`


::: tip 备注：
+ 命令是可串联的，如 'ggi' 会先移动光标到第一行，然后在光标前插入
:::



### 移动光标

+ 基本的光标移动：只需要 h/j/k/l(左/下/上/右)就可以移动光标了
+ 单词间的移动：
```
w/e：移动到下一个单词的开头/结尾(认定单词以数字、字母、下划线分割)
W/E：移动到下一个单词的开头/结尾(认定单词以空白符分割)
b/B：移动到上一个单词的开头
```

+ 行内移动：
```
0/$：移动到行首/行尾
^/g_：移动到行首/行尾非空字符(空格，tab，换行等)处
fa/Fa：移动到当前行的下一个/前一个 a 处
t,/T,：移动到当前行的下一个/前一个 , 的前一个字符
```

+ 更快速的移动：
```
gg/G：移动到第一行/最后一行
H/M/L：移动到页面顶部/中间/尾部
:2/2G：移动到第二行

页面是指编辑器界面能显示的的最大内容(为一页)
```

+ 括号匹配：要先将光标移动到括号(`(`, `{`, `[`)处
```
%：移动到一组括号匹配的位置

如移动前光标在 '(' 则会移动到 ')'，反之
```

+ 正则匹配：使用正则匹配后，匹配的内容会高亮，此时可在匹配的选项中移动
```
/pattern：正则匹配

/(：匹配所有 "("，可使用 <Enter> 移动到下一个匹配
```

+ 匹配移动：可对正则命中的多个选项中移动，也可在单词/字符的多个匹配中移动
```
#/*：移动到上一个/下一个匹配

如移动前光标在 'number' 的任一个字符处，使用 # 会移动到上一个 'number' 的位置
对 '(' 使用时，# 会移动光标到上一个 '(' 的位置
```



### 常用操作

+ 撤销/反撤销(undo/redo)：
```
u：撤销上一个操作
<C-r>：取消上一个撤销的操作
```

+ 删除(/delete)：
```
x：删除光标所在字符
d：开始删除，但需要更多指示操作

dd：删除光标所在行
d0/d$：删除至行开头/行结尾
```

+ 修改(change)：相当于删除后进入插入模式
```
cw：删除当前单词，并进入插入模式
```

+ 拷贝()：拷贝后的内容会保存至剪贴板，将来可用于粘贴
```
y：开始拷贝，但需要更多指示操作

yy：拷贝当前行到剪贴板
y0/y$：拷贝至开头/结尾的内容到剪贴板
```

+ 粘贴(paste)：
```
p/P：在下一行/上一行粘贴剪贴板内容
```

+ 转换大小写：
```
gU/gu：将光标的内容转换为大写/小写
```


::: tip 备注：
+ 命令的 pending 状态：像 d/y 等一些命令使用后，并不会马上有结果，而是需要更多的指示操作
+ 剪贴板：除了拷贝外，删除操作(如 d/x)也会将内容保存至剪贴板
+ 像 d/y/c 的操作还可以对一个区域操作：
```
dt"：删除内容，遇到 " 后停止
daw/diw：删除一个单词，前者还会删除相邻的空格
```
:::



### 重复

+ 重复一次：
```
.：重复使用上一个命令
```
+ 多次重复：
```
2.：使用两次上一个命令
2dd：删除两行

大多数命令都能重复，只要你想得到，基本上 vim 都能做到
```
+ 重复的串联：
```
10ilove [Esc]：重复十次插入操作，每次内容为 "love "
```


### 自动提示

+ 输入一个单词的前缀后，`<C-n>`/`<C-p>` 开启自动提示：
```
<C-n>：开启/切换到下一个提示
<C-p>：开启/切换到上一个提示
```



## 超能力

### 可视化选择

+ 使用 v/V 开始可视化选择，接着可以通过移动光标修改所选择的内容区域
+ v/V 不同之处为 v 选择的最小单位为字符，而 V 为行
+ 一旦选择了区域，就可以进行一系列的操作(只不过是从操作单个字符变成了操作一个区块)：
```
<v>：一系列区块选择，如 Vjj(选择当前行及下两行)，Vgg(选择当前行以及上面所有行)
<v>yp：复制并粘贴
<v>J：合并为一行(还会智能地添加空格)

<v><：向左缩紧
<v>>：向右缩进
<v>=：自动缩进
```

+ 还可以使用 `<C-v>` 进行一个区域操作过程，最后使用 `<Esc>` 触发并结束：
```
0<C-v>jjjI-- <Esc>：移动到行首 -> 开始区域操作 -> 选择当前行及之后三行 -> 在行开头插入 "-- " -> 结束

<C-v>jjj$A;<Esc>：开始区域操作 -> 选择当前行及之后三行 -> 移动到行尾 -> 在行尾添加 ";" -> 结束
```



### 宏录制

+ 可以把一系列的操作录制到寄存器，然后再回放(replay)：
```
qa：开始录制，保存至 a 寄存器
q：结束录制
@a：回放 a 寄存器的操作
@@：回放最近一个录制的操作
```

+ 展示：
```
准备：新建一个文本，其只有一行，且只有一个数字 1
完整命令：qaYp<C-a>q
+ qa：开始录制，存至寄存器 a
+ Yp：复制一行(这里复制了 1)
+ <C-a>：增加 1
+ q：结束录制

@a：在 1 下面写 2
@@：在 2 下面写 3
100@@：继续写至 103
```



### 分屏







## 别忘了保存

+ 保存和退出：
```
:w：保存但不退出
:q!：不保存，强制退出
:wq/:x：保存并退出

:saveas <path/to/file>：另存为 <path/to/file>
```

+ 打开文件：
```
:e <path/to/file>：打开一个文件
```
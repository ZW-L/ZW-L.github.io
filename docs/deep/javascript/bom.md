## BOM

### setInterval 需要注意的点，使用 setTimeout 实现 setInterval

**使用 setInterval 需要注意的点：**
+ 避免内存泄漏，在退出当前页面前清除定时器

**使用 setTimeout 实现 setInterval：**
```js
// 递归实现
function _setInterval(fn, delay) {
  setTimeout(function() {
    fn()
    _setInterval(fn, delay)
  }, delay)
}

// 调用
_setInterval(function() {
  console.log(new Date())
}, 1000)
```

### token, cookie, session 三者的理解和区别

**理解：**
+ `cookie`：
  + 浏览器里面能永久存储的一种数据，由服务器生成，发送给浏览器
  + 浏览器把 `cookie` 以 `k-v` 形式保存到某个目录下的文本文件内，下一次请求同一网站时会把该 `cookie` 发送给服务器
  + 浏览器加入了一些限制确保 `cookie` 不会被恶意使用，同时每个域的 `cookie` 数量是有限的
+ `session`：
  + 会话，服务器给每个客户端分配的不同的“身份标识”，客户端每次向服务器发请求的时候，都带上这个“身份标识”，服务器就知道这个请求来自哪个客户端
  + 客户端有很多种方式保存这个“身份标识”，对于浏览器客户端，大家都默认采用 `cookie` 的方式
  + 服务器使用 `session` 把用户的信息临时保存在了服务器上，用户离开网站后 `session` 会被销毁。这种用户信息存储方式相对 `cookie` 来说更安全，可是`session`有一个缺陷：如果web服务器做了负载均衡，那么下一个操作请求到了另一台服务器的时候`session`会丢失
  + 在基于 `Session` 的身份验证中，服务器将在用户登录后为用户创建一个 `Session`。然后，`Session ID` 会被存储在用户浏览器的 `Cookie` 中。当用户保持登录状态时，`Cookie` 将与每个后续请求一起被发送出去。然后，服务器可以将存储在 `Cookie` 上的 `Session ID` 与存储在内存中或者数据库中的 `Session` 信息进行比较，以验证用户的身份，返回给用户客户端响应信息的时候会附带用户当前的状态
+ `token`：
  + 无状态：基于 `Token` 的身份验证是无状态的，不将用户信息存在服务器或 `Session` 中
  + 安全性：`Token` 是有时效的，一段时间之后用户需要重新验证，也可以手动撤回 `Token`
  + 可扩展性：`Token` 能够创建与其它程序共享权限的程序
  + 多平台跨域：只要用户有一个通过了验证的 `token`，数据和资源就能够在任何域上被请求到
  + 基于标准：创建 `Token` 的时候，可以设定一些选项

**基于 Token 的身份验证的过程：**
1. 用户通过用户名和密码发送请求
2. 程序验证
3. 程序返回一个签名的 `token` 给客户端
4. 客户端储存 `token`,并且每次用于每次发送请求
5. 服务端验证 `token` 并返回数据

### 浏览器渲染原理及流程

**流程：**
1. 构建 `DOM` 树：渲染引擎解析 `HTML` 文档，首先将标签转换成 `DOM` 树中的 `DOM Node`(包括 `js` 生成的标签)生成内容树
2. 构建 `render` 树：解析对应的 `CSS` 样式文件信息（包括 `js` 生成的样式和外部的样式）
3. 布局 `render` 树：从根节点递归调用，计算每一个元素的大小，位置等，给出每个节点所在的屏幕的精准位置
4. 绘制 `render` 树：遍历渲染树，使用 `UI` 后端层来绘制每一个节点

+ 重绘：当盒子的位置、大小以及其他属性，例如颜色、字体大小等到确定下来之后，浏览器便把这些颜色都按照各自的特性绘制一遍，将内容呈现在页面上。触发重绘的条件：改变元素外观属性。如：color，background-color等
重绘是指一个元素外观的改变所触发的浏览器行为，浏览器会根据元素的新属性重新绘制，使元素呈现新的外观
注意：table 及其内部元素需要多次计算才能确定好其在渲染树中节点的属性值，比同等元素要多发时间，要尽量避免使用table布局

+ 重排（重构/回流/reflow）： 当渲染书中的一部分（或全部）因为元素的规模尺寸，布局，隐藏等改变而需要重新构建，这就是回流。
每个页面都需要一次回流，就是页面第一次渲染的时候


### 304 的缓存原理

### Web 缓存的优点及实现

**优点：**
+ 减少不必要的请求，降低服务器的压力
+ 直接读取浏览器的数据，加快页面打开速度

**实现：**
+ 


### CDN 及其原理

+ CDN：内容分发网络。尽可能的避开互联网有可能影响数据传输速度和稳定性的瓶颈和环节，使内容传输的更快更稳定。
+ 原理：广泛采用各种缓存服务器，将这些缓存服务器分布到用户访问相对的地区或者网络中；将用户的访问指向距离最近的缓存服务器，由缓存服务器直接响应用户的请求
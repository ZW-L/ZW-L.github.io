---
sidebarDepth: 2
---

## 概念

### 文件权限

+ 每个文件/目录都有三种权限：
  + 用户(User)：即文件拥有者
  + 所属群组(Group)：即用户组
  + 其他人(Others)：其他非用户组的用户

+ 权限格式，使用 `ls -l hello.txt` 显示 hello.txt 文件的详细信息
```sh
# 文件类型权限 连接数 拥有者 所属用户组 文件大小    最后修改时间     文件名
-rw-r--r--     1   root   root      0       11月  9 19:03  hello.txt
```

+ 文件类型权限：共 10 个字符，除第一个字符外，每三个字符构成一组
```sh
# 首字符：文件类型标识
# 第一组：文件拥有者的权限，rw- 表示可读写
# 第二组：用户组内的其他用户的权限，r-- 表示只读
# 第三组：其他用户的权限，r-- 表示只读
```

+ 权限类别：r(read), w(write), x(execute)
```
rwx 对应数字 421，可由二进制计算得来(r=1*2^2, w=1*2^1, x=1*2^0)
r-- 对应数字 400(r=1*2^2, w=0*2^1, x=0*2^0)

但通常使用一个数值表示三个字符，即它们的和，如 rwx 为 7，r-- 为 4
因此，可以使用一个三位数表示文件/目录的权限：
-rw-r--r-- 为 622
-rwxrwxrwx 为 777
```

+ 对比文件和目录的权限：

|类别|操作内容|r|w|x|
|-|-|-|-|-|
|文件|数据|读数据|增删改数据|执行数据|
|目录|文件名|读文件名|修改文件名|进入该目录|

::: tip 备注：
+ w 权限相当重要，它能够删除、更新、新建文件/目录，千万不要随便给予其他用户
+ r 权限会影响 ls 命令的使用，以及按 tab 时的自动补全
+ 没有 x 权限是不能进入到指定目录的，若要开放目录给任何人浏览，确保给予 r 和 x 权限，但不要给 w 权限
:::


### 默认权限

+ 文件默认权限：[umask](#umask)，顾名思义它是一个计算权限的掩码，通常默认为 0022，它们指的是创建文件/目录时默认会被拿掉的权限，后 3 位分别对应 r、w、x；此外，还要明白：
  + 创建文件时的默认权限：666，即 -rw-rw-rw-
  + 创建目录时的默认权限：777，即 drwxrwxrwx
```sh
# 根据 umask 计算最终权限，022 对应 ----w--w-，因此：
# 建立文件的最终权限：(-rw-rw-rw-) - (----w--w-) ==> -rw-r--r--
# 建立目录的最终权限：(drwxrwxrwx) - (----w--w-) ==> drwxr-xr-x

# 可以修改 umask 应用于一些场景，如以下保留用户组的写入权限：
umask 002
# 根据 umask 计算最终权限，002 对应 -------w-，因此：
# 建立文件的最终权限：(-rw-rw-rw-) - (-------w-) ==> -rw-rw-r--
# 建立目录的最终权限：(drwxrwxrwx) - (-------w-) ==> drwxrwxr-x
```


### 文件类型

+ 文件种类(括号内符号表示在文件类型权限的第一位字符)

|类型|子类型或说明|
|-|-|
|常规文件(-)|**纯文本文件**：ASCII，通过 `cat` 命令可读取内容<br>**二进制文件**：binary，`cat` 命令就是一个二进制文件<br>**数据文件**：data，如 `/vat/log/wtmp` 可使用 `last` 读取(使用 `cat` 会乱码)<br>|
|目录(d)|目录|
|链接文件(l)|类似 window 的快捷方式|
|设备与设备文件(b/c)|**区块设备文件**：如硬盘、软盘，能随机读写<br>**字符设备文件**：如键盘、鼠标，能一次性读取，但不能截取输出|
|数据接口文件(s)|sockets，通常用于网络上的数据交换，如 `/run` 或 `/tmp` 下的一些文件|
|数据输送文件(p)|FIFO(pipe)，主要用于解决多个程序同时读写一个文件造成的错误问题|

+ linux 文件扩展名：不影响程序的执行(其只与 x 权限有关)，可以为任一扩展名
+ 文件名长度限制：255 个字符
+ 文件名限制，不要使用：
```sh
# 在命令模式下有特殊意义的字符
* ? > < ; & [ ] | \ ' " ` ( ) { }
# .(隐藏文件) -(选项前缀) +
```



### 目录配置

+ [FHS](https://www.pathname.com/fhs/)(Filesystem Hierarchy Standard)用于规范文件目录，让用户了解一般安装的软件放置在哪里
+ 四种交互作用：

||可分享(shareable)|不可分享(unshareable)|
|-|-|-|
|不变(static)|/usr(软件存放)|/etc(配置文件)|
||/opt(第三方辅助软件)|/boot(启动与内核文件)|
|可变动(variable)|/var/mail(用户邮箱)|/var/run(程序相关)|
||/var/spool/news(新闻组)|/var/lock(程序相关)|

+ 实际上，FHS 对目录树架构仅定义三层目录应该放置什么数据

|目录|描述|
|-|-|
|/|(root，根目录)，与启动系统有关
|/usr|(unix software resource)，与软件安装、执行有关
|/var|(variable)，与系统运行过程有关

+ **根(/)目录**

|目录|放置内容|
|-|-|
|**要求必须存在**||
|/bin|一些执行文件，并且是在单人维护模式下能使用的|
|/boot|系统启动时会使用的文件，如使用 grub2 引导时会包含 /boot/grub2 目录|
|/dev|任何设备与接口设备都以文件的形式存在于该目录|
|/etc|系统主要的配置文件，一般来说除 root 用户外只能查看，建议不要放可执行文件在这，另：<br>`/etc/opt`(必要)：放置第三方辅助软件 /opt 的相关配置文件<br>`/etc/X11`(建议)：与 X Window 有关的配置文件，尤其是 xorg.conf<br>`/etc/sgml`(建议)：与 SGML 格式有关的配置文件<br>`/etc/xml`(建议)：与 XML 格式有关的配置文件|
|/lib|系统启动时用到的函数库、/bin 或 /sbin 的命令会调用的函数库|
|/media|可删除的设备，软盘、光盘、DVD 等|
|/mnt|放置暂时挂载的设备|
|/opt|放置第三方辅助软件，如 KDE，但以前一般放在 /usr/local 目录|
|/run|系统启动后产生的各项信息；该目录使用内存来模拟，性能会好很多|
|/sbin|启动过程中需要的命令(启动、修复、还原等)|
|/srv|service，网络服务启动后需要使用的数据目录，如 /srv/www|
|/tmp|temp，暂时放置文件，任何人都能读取；需要定时清理，且不要放置重要的数据|
|/usr|见下文|
|/var|见下文|
|**建议存在**||
|/home|系统默认的用户 home 目录，如 `~`(当前用户 home 目录)、`~user1`(user1 的 home 目录)|
|/lib\<qual\>|存放与 /lib 不同格式的二进制函数库，如支持 64 位的 /lib64 函数库等|
|/root|root 的 home 目录，为了进入单人维护模式而仅挂载根目录时能够获取|


+ **/usr 目录**

|目录|放置内容|
|-|-|
|**要求必须存在**||
|/usr/bin/|centos7 中将 /bin 链接到该目录，因此它们是一样的，建议不要有子目录|
|/usr/local/|本机安装下载的软件，便于管理(如想安装新版本的软件，但不想删除系统自带版本时)|
|/usr/lib/|与 /lib 相同，/lib 已链接到该目录|
|/usr/sbin/|与 /sbin 基本相同，/sbin 已链接到该目录|
|/usr/share/|只读的数据文件、共享文件(几乎都是不分硬件架构的文本文件)，通常还有子目录，如：<br>`/usr/share/man`：在线帮助文件<br>`/usr/share/doc`：软件说明文档<br>`/usr/share/zoneinfo`：时区相关的文件|
|**建议存在**||
|/usr/games/|游戏相关的数据|
|/usr/include/|c/c++ 等程序的头文件(header)和包含文件(include)，用 Tarball 方式安装软件时会用到|
|/usr/libexec/|不被一般用户使用的执行文件或脚本|
|/usr/lib\<qual\>/|与 /lib\<qual\> 相同，/lib\<qual\> 已链接到该目录|
|/usr/src/|source，源代码；如内核源代码建议放置 /usr/src/Linux/ 下|

+ **/var 目录**

|目录|放置内容|
|-|-|
|**要求必须存在**||
|/var/cache/|程序运行过程中产生的缓存|
|/var/lib/|程序执行过程中需要使用的数据文件|
|/var/lock/|一次只能被一个程序使用的设备或文件资源，目前已移到 /run/lock 中|
|/var/log/|放置日志文件，非常重要，如 /var/log/messages、/var/log/wtmp 等|
|/var/mail/|个人电子邮箱，也被放置到 /var/spool/mail，两者通常为链接关系|
|/var/run/|与 /run 相同，该目录链接到 /run 目录|
|/var/spool/|放置一些队列数据|



### 路径

+ 绝对路径：以 / 开头的路径，如 `/etc/passwd`
+ 相对路径：不是以 / 开头的路径，如 `../var/log`，而且：
  + `.`：当前目录，相当于 `./`
  + `..`：上一层目录，相当于 `../`



### 文件隐藏属性

+ Linux 传统的文件系统(ext2, ext3, ext4)还支持设置系统隐藏属性，而 Centos 7.x 的系统默认使用 xfs 作文件系统，只支持部分的属性
+ 参考命令 [lsattr](#lsattr)、[chattr](chattr)


### 文件特殊权限

+ 除 r、w、x 权限外，还有几类特殊的权限：
```sh
# SUID：Set UID，会在用户执行权限位标记 s，如 -rwsr-xr-x
#  + 仅对二进制程序有效，且本权限仅在执行该程序过程中有效(run-time)
#  + 若执行者对于该程序需要具有 x 的执行权限，他将具有该程序拥有者(owner)的权限
#  + 如一般用户能修改自身的密码，是因为 /usr/bin/passwd 具有 s 权限，他们使用 passwd 会暂时获得 root 权限 

# SGID：Set GID，会在用户组执行权限位标记 s，如 -rwx---s---x
#  + 对二进制程序有用，当执行者对程序有 x 权限时，该权限能使执行者在执行过程中获得程序的用户组支持
#  + 对目录有用，当执行者对目录有 rx 权限时，该权限能使用户在此目录下的有效用户组变成该目录的用户组
#  + 该权限对项目开发很有用，涉及用户组权限的分配

# SBIT：Set Bit，会在其他用户执行权限位标记 t，如 -drwxrwxrwt
#  + 当前仅对目录有效，当用户对目录有 wx 权限时，他在该目录下创建的文件/目录，只有他和 root 能删除
#  + 如 /tmp 的权限是 drwxrwxrwt，只有用户自身和 root 能删除该用户创建的文件/目录
```



## 命令

### 修改权限

<Base-BadgeList :list="['chgrp', 'chown', 'chmod', 'umask']"/>

#### chgrp

+ change group，修改文件所属用户组
```sh
chgrp <用户名> [-R] <目录｜文件>

# -R：递归修改子目录下的所有文件和目录
```

#### chown

+ change owner，修改文件拥有者
```sh
chown [-R] <用户名> <文件｜目录>
chown [-R] <用户名>:<用户组名> <文件｜目录>

# -R：递归修改子目录下的文件和目录
# : 也可以使用 . 代替，当只修改用户组时，可以：
chown .sshd initial-setup-ks.cfg
```

#### chmod

+ 修改权限、SUID、SGID、SBIT 等
```sh
# 方式1：使用三位数值设置权限
chmod [-R] <三位数值权限> <文件｜目录>
chmod 755 hello.txt   # 权限为 -rwxr-xr-x

# 方式2：使用符号设置权限，注意不能有空格，a 表示所有人
chmod [u=<符号权限>,g=<符号权限>,o=<符号权限>,a=<符号权限>] <文件｜目录>
chmod u=rwx,g=rx,o=rx hello.txt   # 权限为 -rwxr-xr-x

# 方式3：使用符号添加或删除权限，当不知道原有权限时这很有用
chmod [u<+|-><符号权限>,g<+|-><符号权限>,o<+|-><符号权限>,a<+|-><符号权限>] <文件｜目录>
chmod a+w .bashrc   # 为所有人添加写权限
chmod a-x .bashrc   # 拿掉所有人的执行权限
```

#### umask

+ 显示/设置文件默认权限
```sh
umask       # 0022
umask -S    # u=rwx,g=rx,o=rx
umask 002   # 设置为 0002
```



### 处理目录

<Base-BadgeList :list="['cd', 'pwd', 'mkdir', 'rmdir']"/>

#### cd

+ 改变当前的工作目录，与 `Windows` 下的 `cd` 命令一致
```sh
cd /    # 切换根目录
cd ..   # 返回上级目录
cd -    # 返回刚刚的目录
cd ~    # 切换工作目录，即 /root
cd ~seven   # 切换指定用户的工作目录
cd ~/.ssh   # 切换指定目录，相对于 ～
cd ../../path/to/cd   # 切换指定目录，相对路径
cd /path/to/cd        # 切换指定目录，绝对路径
```

#### pwd

+ 显示当前所在目录
```sh
pwd [-P]

# -P：显示真正的路径，而非使用链接(link)路径
```

#### mkdir

+ 创建目录
```sh
mkdir [-mp] <目录名>

# -m：设置目录的权限，不使用默认权限(umask)
# -p：识别深层目录，递归创建
```

#### rmdir

+ 删除空目录(目录内不能有任何文件或子目录)
```sh
rmdir [-p] <目录名>

# -p：同时删除上层的空目录
```



### 文件与目录管理

<Base-BadgeList :list="['ls', 'cp', 'rm', 'mv', 'touch', 'file']"/>

#### ls

+ 显示指定工作目录下的内容，类似 `Windows` 下的 `dir` 命令，而且 `Linux` 中也能使用 `dir` 代替 `ls`
```sh
ls [-aAdfFhilnrRSt] <文件名或目录名>
ls [--color={never,auto,always}] <文件名或目录名>
ls [--full-time] <文件名或目录名>

# -a：显示所有文件和子目录，包含隐藏文件(.开头的文件或目录)
# -A：与 -a 类似，但不显示 . 和 .. 两个目录
# -d：显示目录列表
# -l：显示文件名称、权限、使用者、大小等信息
# -h：自动转化容量单位
# -r：将排序结果反向输出
# -t：以时间排序
# -S：以文件大小排序
# -u：以文件上次被访问的时间排序
# -x：按列输出，横向排序
# -C：按列输出，纵向排序
# -m：横向输出，以 `,` 分隔
# -q：用 `?` 代替不可输出的字符
# -k：以 k 字节的形式表示文件的大小
# -o：显示除组信息外的详细信息
# -R：列出所有子目录下的文件
# -Q：把输出的文件名用括号包含
# -pF：添加文件类型(`*`为可执行的普通文件，`/`为目录，`@`为符号连接，`\|`为 FIFO，`=`为套接字)
# --color：接 设置不显示颜色、显示颜色、自动判断
# --full-time：输出完整时间
# --time={atime,ctime}：输出 ctime 或 atime，而不是修改时间

ls -al      # 显示当前目录的所有文件、目录的详细信息
ls -apF     # 显示当前目录下的所有文件，并标明文件类型
ls -l /home # 显示指定目录的文件、目录信息
```

#### cp

+ 复制文件或目录，要注意权限，默认情况下复制后目标文件的拥有者是命令操作者本身
```sh
cp [-adfilprsu] <源> <目标>
cp [-adfilprsu] source1, source2, ... <目标目录>  # 多个源文件时目标一定要是目录

# -a：相当于 -dr --preserve=all(常用)
# -d：对链接文件只复制链接文件属性，而非复制文件本身
# -l：进行硬链接的链接文件建立，而非复制文件本身
# -r：若源文件是目录，则递归复制(常用)
# -i：遇到同名文件时提示是否覆盖(常用)
# -f：强制覆盖
# -p：保留文件的权限、用户、时间(备份常用)
# -s：复制为符号链接文件，即 “快捷方式”
# -u：目标文件比源文件旧、或目标文件不存在时才复制
# --preserve=all：除 -p 参数外，还加入 SELinux 的属性、links、xattr 等
```

#### rm

+ 删除目录或文件
```sh
rm [-fir] <文件｜目录>

# -i：交互式删除，在删除前确认
# -r：递归删除子目录和文件
# -f：强制删除，不提示确认

rm a.txt  # 删除文件
rm -r b   # 删除目录，必须带 -r
rm -rf b  # 对信任的操作使用 -f

# 不建议使用 - 开头的文件名，但对于以 - 开头的文件删除，可以有两种变通：
rm ./-a.txt
rm -- -a.txt
```

#### mv

+ 用于文件/目录更名或移动到指定目录
```sh
mv [-fiu] <源> <目标>
mv [-fiu] source1, source2, ... <目标目录>  # 多个源文件时，目标一定是目录

# -i：启用交互式操作
# -r：不提示移动，默认覆盖

mv a.txt b.txt  # 重命名文件
mv abc cba      # 重命名文件夹
mv a.txt /b     # 移动文件
mv a b          # 移动文件夹
```

#### touch

+ 用于修改文件时间或创建新文件
```sh
touch [-acdmtr] <文件名>

# -a：修改文件的访问时间(atime)为系统当前时间
# -m：修改文件的修改时间(mtime)为系统当前时间
# -c：修改文件的状态时间(ctime)为系统当前时间，若文件不存在则不创建也不提示
# -d：接 自定义的日期，相当于 --date="自定义的日期"
# -t：接 自定义的时间，格式为 YYYYMMDDhhmm
# -r：接 参考文件/目录，将设置为该参考文件/目录的日期、时间

# 主要用来创建空文件：
touch hello.txt

# 将日期设置为两天前
touch -d "2 days age" hello.txt
```

::: tip 文件的三个时间：
+ 修改时间(modification, **mtime**)：当文件的内容变更时，会更新该时间
+ 读取时间(access time, **atime**)：当文件的内容被读取(如 cat 命令)时，会更新该时间
+ 状态时间(status time, **ctime**)：当文件的状态(权限或属性)变更时，会更新该时间
:::


#### file

+ 查看文件的基本信息，能够显示文件的类型、格式、是否使用动态链接库等
```sh
file [-bLzi] <文件名>

# -b：显示文件类型结果，不显示对应文件名称
# -L：直接显示符号链接所指向文件的类型
# -z：显示压缩文件的信息
# -i：如果文件不是常规文件，则不进一步对文件类型进行分类
```



### 查看文件内容

+ 这些命令大都支持管道功能，可以组合它们实现复杂的功能

<Base-BadgeList :list="['cat', 'tac', 'nl', 'more', 'less', 'head', 'tail', 'od']"/>

#### cat

+ concatenate，将文件的内容输出到屏幕
```sh
cat [-AbEnTv] <文件名>

# -b：列出行号，但空白行不赋予行号
# -n：列出行号，空白行也有行号
# -v：列出看不出来的特殊字符(写成转义字符)
# -T：将 Tab 按键用 ^I 显示
# -E：将结尾换行符用 $ 显示
# -A：相当于 -vET

cat hello.txt   # 输出文件内容到屏幕
cat a.txt b.txt > c.txt   # 合并文件内容到另一个文件
```

#### tac 

+ 类似 `cat`，但从文件尾部开始输出(倒序)

#### nl

+ 加行号打印
```sh
nl [-bnw] <文件名>

# -b：接 行号的方式，a(始终列出行号)、b(空行不列出行号)
# -n：接 行号的显示的位置，ln(屏幕左侧)、rn(自己栏位的最右方，不加 0)、rz(自己栏位的最右方，加 0)
# -w：接 行号栏位占用的字符数，默认 6
```

#### more

+ 分屏显示文件内容，显示完时会自动退出，也可手动使用 q 按键退出
```sh
more [-dspc] <文件名>

# -d：在底部显示友好信息
# -s：将输出文件的多个空行减少为一个空行
# -p：先清屏再显示
# -c：显示每一屏前都清屏

# 辅助按键：
#   Enter：向下翻一行
#   Space：向下翻一页
#   /字符串：在当前内容查找字符串
#   :f：立刻显示文件名及目前显示的行数
#   q：退出
#   b/ctrl-b：往回翻页，只对文件有用，对管道无效
```

#### less

+ 类似 `more`，但更有弹性，即能上下翻页、查找
```sh
less

# 辅助按键：
#   Space：向下翻一页
#   page down：向下翻一页
#   page up：向上翻一页
#   /字符串：向下查找
#   ?字符串：向上查找
#   n：重复前一个查找
#   N：反向重复前一个查找
#   g：前进到数据的第一行
#   G：前进到数据的最后一行
#   q：退出
```

#### head

+ 取出文件前几行
```sh
head [-n] <文件名>

# -n：接 行数，表示显示几行

head -n 10 hello.txt  # 显示前 10 行
head -n -10 hello.txt # 显示除最后 10 行外的所有行
```

#### tail

+ 取出文件后几行
```sh
tail [-nf] <文件名>

# -n：接 行数，表示显示几行
# -f：持续刷新显示文件的内容，使用 ctrl-c 后退出

tail -n 10 hello.txt        # 显示后 10 行
tail -n +10 hello.txt       # 显示除前 9 行外的所有行
tail -f /var/log/messages   # 持续输出行，直到使用 ctrl-c 退出
```

#### od

+ 读取非纯文本文件(二进制文件或数据文件)
```sh
od [-t] <文件名>

# -t：接各种类型，如
#   a      ：利用默认的字符输出
#   c      ：使用 ASCII 字符输出
#   d[size]：使用十进制(decimal)输出数据，每个整数占用 size Bytes
#   o[size]：使用八进制(octal)输出数据，每个整数占用 size Bytes
#   x[size]：使用十六进制(hexadecimal)输出数据，每个整数占用 size Bytes
#   f[size]：使用浮点数(float)输出数据，每个数占用 size Bytes
```





### 查找文件

<Base-BadgeList :list="['which', 'whereis', 'locate', 'updatedb', 'find']"/>

#### which

+ 从 PATH 内设置的目录查找执行文件
```sh
which [-a] <命令名>

# -a：所有由 PATH 中可找到的命令均列出，而不是第一个被找到的命名名

which ifconfig  # 查找成功
which history   # 查找失败，因为 history 是 bash 内置的命令，which 只会查找 PATH 内设置的目录
```

#### whereis

+ 从一些特定的目录查找文件
```sh
whereis [-blmsu] <文件名｜目录名>

# -l：列出 whereis 回去查询的几个目录
# -b：只查找二进制(binary)文件
# -m：只查找在说明文件(manual)路径下的文件
# -s：只查找 source 源文件
# -u：查找不再上述三个项目中的其他特殊文件

```

#### locate

+ 由已建立的数据库(/var/lib/mlocate)中的数据查找，该数据库通常每天更新一次
```sh
locate [-iclSr] <关键字>

# -i：忽略大小写
# -c：不输出文件名，仅计算找到的文件数量
# -l：接 行数，仅输出几行
# -S：输出 locate 使用的数据库文件的相关信息，包括该数据库记录的文件/目录数量等
# -r：接 震泽表达式的显示方式
```

#### undatedb

+ 手动更新 locate 数据库，使 locate 对新文件可用
```sh
undatedb
```

#### find

+ 从磁盘查找文件，受磁盘影响速度较慢
```sh
find [查找路径] [-option] [-print -exec -ok 命令 {} \;] 

# -name '字符串'
# -lname '字符串'
# -gid：接 GID
# -uid：接 UID
# -empty：空文件
# -path '字符串'
# -group '字符串'
# -depth
# -prune 目录
# -size n
# -user '字符串'
# -mtime：接修改的天数，n(n 天前那一天修改)、+n(n 天前[不包括那一天]修改)，-n(前 n 天被修改)
# -type：接文件类型
# -print：打印搜索结果
# -exec：对搜索结果执行 Linux 命令
# -ok：询问是否对搜索结果执行 Linux 命令
```




### 文件隐藏属性

<Base-BadgeList :list="['lsattr', 'chattr']"/>

#### lsattr

+ 显示文件的隐藏属性
```sh
lsattr [-adR] <文件名｜目录名>

# -a：显示隐藏文件的属性
# -d：对于目录，仅显示目录的属性(不显示目录内的文件名)
# -R：显示子目录
```

#### chattr

+ 修改文件的隐藏属性(只能在传统的 ext2、ext3、ext4 文件系统上生效，其它文件系统可能无法完整支持)
```sh
chattr [+-=] [ASacdistu] <文件名｜目录名>

# +-=：分别为添加、删除、直接设置属性
# -A：设置后，文件/目录的存取时间(atime)将不会修改(可避免 I/O 较慢的机器过度读写磁盘)
# -S：设置后，文件的修改会同步写入(默认文件是非同步写入的)
# -c：设置后，文件会自动解压缩(写入时加压再存储，读取时自动解压；对大文件似乎比较有用)
# -d：设置后，文件/目录不会被 dump 程序备份
# -a：设置后，文件只能增加数据(不能删除、修改)，仅 root 能设置
# -i：设置后，文件被冻结(不能删除、改名、写入或修改数据，也不能设置链接；对于系统安全性有帮助)，仅 root 能设置
# -s：设置后，文件删除后无法恢复
# -u：设置后，文件删除后还能恢复
```



### diff

+ 比较文件的差异(逐行比较)
+ 若比较的是目录，则比较目录中同名的文件，不会比较子目录
```sh
diff [option] 文件1 文件2
```

**选项：**

选项|说明
-|-
-c|显示全部内容，标出不同之处
-b|忽略行尾的空格，同时将任意多个连续空格视为一个
-r|当文件1 和文件2 为目录时，比较子目录中的文件
-s|当两文件相同时，显示文件的相同信息



### grep

+ 过滤文本
```sh
grep [option] 查找的字符串 文件名
```

**常用选项：**

选项|说明
-|-
-A NUM|除了列出符合条件的行外，同时列出每个符合条件行的后 NUM 行
-B|除了列出符合条件的行外，同时列出每个符合条件行的前 NUM 行
-c|只显示符合条件的行数，不显示每行的具体信息
-f file|以一个文件(保存了需要搜索的样式)作为条件进行搜索
-i|忽略大小写
-n|在搜索结果中显示行号



### split

+ 分割文档
```sh
split [option] [input_file] [output_file]
```
+ **常用选项：**

选项|说明
-|-
-b size|指定分割的文件大小，可以指定单位(b, k, m)
-n|指定分割文件的长度，默认 1000 行
-d|将生成的文件序列以数字形式命名
-a|指定生成的文件序列的长度，默认长度为 2



### ln

+ 在文件或目录之间创建链接(默认为硬链接)
  + 硬链接：通过文件的 `inode` 进行链接，只有当最后一个链接被删除后，文档数据块才会被释放(真正删除)
  + 软链接：也叫符号链接，相当于 `Windows` 的快捷方式
+ 常用选项

|选项|说明|
|-|-|
|-r|若目标文件位置中存在与链接名相同的文件，则删除这个文件|
|-s|软链接|
|-d|允许系统管理员硬链接自己的目录|
|-b|对将在链接时会被覆盖或者删除的文件进行备份|

+ 语法
```sh
# 为 nginx 添加软连接，使命令可以在全局使用
ln -s /usr/local/nginx/sbin/nginx /usr/local/bin/nginx
```